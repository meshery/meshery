name: Kafka
version: 0.0.1
schemaVersion: designs.meshery.io/v1beta1
description: Apache Kafka is a distributed streaming platform designed to build real-time pipelines and can be used as a message broker or as a replacement for a log aggregation solution for big data applications.
pattern_file: |
  name: Kafka
  version: 0.0.1
  services:
    kafka:
      name: kafka
      type: Deployment
      namespace: default
      version: v1
      model: kubernetes
      labels:
        app: kafka
        version: 4.0.0
      annotations:
        meshery/component-type: workload
      settings:
        spec:
          replicas: 1
          selector:
            matchLabels:
              app: kafka
          template:
            metadata:
              labels:
                app: kafka
            spec:
              containers:
              - name: kafka
                image: bitnami/kafka:4.0.0-debian-12-r10
                ports:
                - containerPort: 9092
                  name: kafka
                - containerPort: 9093
                  name: kafka-internal
                env:
                - name: KAFKA_CFG_NODE_ID
                  value: "0"
                - name: KAFKA_CFG_PROCESS_ROLES
                  value: "controller,broker"
                - name: KAFKA_CFG_CONTROLLER_QUORUM_VOTERS
                  value: "0@kafka:9093"
                - name: KAFKA_CFG_LISTENERS
                  value: "PLAINTEXT://:9092,CONTROLLER://:9093"
                - name: KAFKA_CFG_ADVERTISED_LISTENERS
                  value: "PLAINTEXT://:9092"
                - name: KAFKA_CFG_CONTROLLER_LISTENER_NAMES
                  value: "CONTROLLER"
                - name: KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP
                  value: "CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT"
    kafka-service:
      name: kafka-service
      type: Service
      namespace: default
      version: v1
      model: kubernetes
      labels:
        app: kafka-service
      settings:
        spec:
          type: ClusterIP
          ports:
          - port: 9092
            targetPort: kafka
            protocol: TCP
            name: kafka
          selector:
            app: kafka