---
layout: default
title: Rest API Docs
---

{{ content }}

{% if page.data %}
{% assign swagger = site.data[page.data] %}
{% else %}
{% assign swagger = page %}
{% endif %}
{% assign sorted_paths = swagger.paths | sort %}

{% comment %}
Filter cloud-only endpoints from the paths.
An endpoint is hidden if x-internal contains "cloud" but NOT "meshery".
Logic: SHOW if x-internal is null, empty, contains "meshery", or doesn't contain "cloud"
       HIDE if x-internal contains "cloud" but NOT "meshery"
{% endcomment %}

<details>
    <summary>
        Here is a concise list of all REST API endpoints.
    </summary>
    <ul>
        {% for route in sorted_paths %}
            {% assign path_has_visible_methods = false %}
            {% for method in route[1] %}
                {% if "get,post,put,delete,patch,options,head" contains method[0] %}
                    {% assign x_internal = method[1]["x-internal"] %}
                    {% assign show_method = true %}
                    {% if x_internal and x_internal.size > 0 %}
                        {% assign x_str = x_internal | join: "," %}
                        {% if x_str contains "cloud" %}
                            {% unless x_str contains "meshery" %}
                                {% assign show_method = false %}
                            {% endunless %}
                        {% endif %}
                    {% endif %}
                    {% if show_method %}
                        {% assign path_has_visible_methods = true %}
                    {% endif %}
                {% endif %}
            {% endfor %}
            {% if path_has_visible_methods %}
                <li>{{ route[0] }}</li>
            {% endif %}
        {% endfor %}
    </ul>
</details>

{% for route in sorted_paths %}
    {% capture methods_html %}
        {% for method in route[1] %}
            {% if "get,post,put,delete,patch,options,head" contains method[0] %}
                {% assign skip_endpoint = false %}
                {% assign x_internal = method[1]["x-internal"] %}
                {% if x_internal and x_internal.size > 0 %}
                    {% assign x_str = x_internal | join: "," %}
                    {% if x_str contains "cloud" %}
                        {% unless x_str contains "meshery" %}
                            {% assign skip_endpoint = true %}
                        {% endunless %}
                    {% endif %}
                {% endif %}

                {% unless skip_endpoint %}
<div class="swagger-method swagger-method-{{ method[0] }}">
    <h3 class="swagger-method-title">
        <a href="#" class="swagger-method-link">
            <span class="swagger-method-name">{{ method[0] | upcase }}</span>
            <span class="swagger-method-summary">{{ method[1].summary }}</span>
        </a>
    </h3>
    <div class="swagger-method-details">
        <h5>Description</h5>
        <md-block>
            <span class="swagger-method-description">{{ method[1].description }}</span>
        </md-block>
        {% if method[1].parameters %}
        <div class="swagger-parameters">
            <h5>Parameters</h5>
            <table class="swagger-parameters-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Located in</th>
                        <th>Description</th>
                        <th>Type</th>
                    </tr>
                </thead>
                <tbody>
                    {% for parameter in method[1].parameters %}
                    <tr>
                        <td>
                            {% if parameter.required %}
                            <span class="swagger-parameter-required">
                            {% endif %}
                                {{ parameter.name }}
                            {% if parameter.required %}
                            </span>
                            {% endif %}
                        </td>
                        <td>{{ parameter.in }}</td>
                        <td>{{ parameter.description }}</td>
                        <td>
                            {% if parameter.schema.type %}
                            {{ parameter.schema.type | capitalize }}
                            {% if parameter.schema.items %}
                            of {{ parameter.schema.items.type | capitalize }}
                            {% endif %}
                            {% elsif parameter.type %}
                            {{ parameter.type | capitalize }}
                            {% if parameter.items %}
                            of {{ parameter.items.type | capitalize }}
                            {% endif %}
                            {% else %}
                            String
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}
        {% if method[1].requestBody %}
        <div class="swagger-parameters">
            <h5>Request body{% if method[1].requestBody.required %} <em>(required)</em>{% endif %}</h5>
            {% if method[1].requestBody.description %}
            <p>{{ method[1].requestBody.description }}</p>
            {% endif %}
            {% for content_entry in method[1].requestBody.content %}
                {% assign content_type = content_entry[0] %}
                {% assign media = content_entry[1] %}
                {% if media.schema.properties %}
                <p><strong>Content type:</strong> <code>{{ content_type }}</code></p>
                <table class="swagger-parameters-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Type</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for prop in media.schema.properties %}
                        <tr>
                            <td>{{ prop[0] }}</td>
                            <td>{{ prop[1].description }}</td>
                            <td>
                                {% if prop[1].type %}
                                {{ prop[1].type | capitalize }}
                                {% if prop[1].format %}
                                ({{ prop[1].format }})
                                {% endif %}
                                {% else %}
                                Object
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% elsif media.schema.type %}
                <p><strong>Content type:</strong> <code>{{ content_type }}</code> &mdash; {{ media.schema.type | capitalize }}</p>
                {% endif %}
            {% endfor %}
        </div>
        {% endif %}
        {% if method[1].responses %}
        <div class="swagger-response">
            <h5>Responses</h5>
            {% for response in method[1].responses %}
            <div class="swagger-response-{{ response[0] }}">
                <p class="swagger-response-title">
                    <span class="swagger-response-code">{{ response[0] }}</span>
                    {% if response[1].description != "" %}<span class="swagger-response-seperator">-</span>{% endif %}
                    <md-block class="mdblock">
                        <span class="swagger-response-description">{{ response[1].description }}</span>
                    </md-block>
                </p>
            </div>
            {% comment %} OpenAPI 3.0: schema under content.<media-type>.schema; Swagger 2.0: schema directly {% endcomment %}
            {% assign resp_schema = nil %}
            {% if response[1].content %}
                {% for resp_content in response[1].content %}
                    {% if resp_content[1].schema.properties %}
                        {% assign resp_schema = resp_content[1].schema %}
                        {% break %}
                    {% endif %}
                {% endfor %}
            {% elsif response[1].schema %}
                {% assign resp_schema = response[1].schema %}
            {% endif %}
            {% if resp_schema.properties %}
            <table class="swagger-parameters-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Format</th>
                        <th>Type</th>
                    </tr>
                </thead>
                <tbody>
                    {% for parameter in resp_schema.properties %}
                    <tr>
                        <td>{{ parameter[0] }}</td>
                        <td>
                            {% if parameter[1].format %}
                            {{ parameter[1].format }}
                            {% else %}
                            Object
                            {% endif %}
                        </td>
                        <td>{{ parameter[1].type }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% endif %}
            {% for content_type in swagger.produces %}
                {% if response[1].examples[content_type] %}
                    {% assign example = response[1].examples[content_type] %}
                    {% if content_type contains 'json' %}
                        {% highlight json %}{{ example }}{% endhighlight %}
                    {% elsif content_type contains 'xml' %}
                        {% highlight xml %}{{ example }}{% endhighlight %}
                    {% else %}
                        {% highlight http %}{{ example }}{% endhighlight %}
                    {% endif %}
                {% endif %}
            {% endfor %}
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>
                {% endunless %}
            {% endif %}
        {% endfor %}
    {% endcapture %}

    {% assign methods_trimmed = methods_html | strip %}
    {% if methods_trimmed != "" %}
<div class="swagger-path">
    <h2 class="swagger-path">{{ route[0] }}</h2>
    {% if route[0] contains '/api/oam' %}
    <span class="deprecated-label">Deprecated</span>
    {% endif %}
    {{ methods_html }}
</div>
    {% endif %}
{% endfor %}

<script type="text/javascript">
    // Helpers

    var slice = Array.prototype.slice;

    function $(expr, parent) {
        return typeof expr === "string" ? (parent || document).querySelector(expr) : expr || null;
    }

    function $$(expr, parent) {
        return slice.call((parent || document).querySelectorAll(expr));
    }

    bind = function (element, o) {
        if (element) {
            for (var event in o) {
                var callback = o[event];

                event.split(/\s+/).forEach(function (event) {
                    element.addEventListener(event, callback);
                });
            }
        }
    };

    toggleDetails = function (element) {
        if (element.classList.contains('open')) {
            element.classList.remove('open');
        }
        else {
            element.classList.add('open');
        }
    }

    // Initialization

    function init() {
        $$('.swagger-method-title').forEach(function (title) {
            bind(title, {
                'click': function (e) {
                    var details = $('.swagger-method-details', title.parentNode)
                    toggleDetails(details[0]);
                    e.preventDefault();
                }
            });
        });
    }


    // DOM already loaded?
    if (document.readyState !== "loading") {
        init();
    }
    else {
        // Wait for it
        document.addEventListener("DOMContentLoaded", init);
    }
</script>
