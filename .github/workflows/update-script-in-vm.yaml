name: Update Script in VM
on:
    push:
      branches:
        - 'master'
      paths:
        - '$GITHUB_WORKSPACE/install/playground/playground-cleanup.sh'
jobs:
    update_script:
        runs-on: ubuntu-latest
    
        steps:
        - name: Harden Runner
          uses: step-security/harden-runner@5c7944e73c4c2a096b17a9cb74d65b6c2bbafbde # v2.9.1
          with:
            egress-policy: audit

        - name: Update Script in VM
          uses: appleboy/ssh-action@b4a07ca5940a7dc94925e99f8e6eab3671b0fa64 # master
          with:
            host: 147.75.47.9
            username: root
            key: ${{ secrets.METAL_SSH_KEY }}
            script: |
                cd meshery/install/playground; curl -O https://raw.githubusercontent.com/meshery/meshery/meshery/install/playground-cleanup.sh
          