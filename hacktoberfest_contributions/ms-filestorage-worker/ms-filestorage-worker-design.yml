id: 8a5e6a60-1c72-4b8b-9a13-2f5b6e88d9a5
schemaVersion: designs.meshery.io/v1beta1
version: 0.0.3
components:
  - id: ed1d97a4-9d2e-414e-8514-dbbb98e760dc
    schemaVersion: components.meshery.io/v1beta1
    version: v1.0.0
    displayName: ms-filestorage-worker
    description: ""
    format: ""
    model:
      id: b3f5bc0d-30f7-607d-6c73-784ddde6cad8
      schemaVersion: models.meshery.io/v1beta1
      version: v1.0.0
      name: kubernetes
      displayName: Kubernetes
      status: enabled
      registrant:
        id: 1a48c8d5-1b02-4b1b-8ac6-3e2ce4f4b9fb
        name: Github
        credential_id: 2f6e2c71-8e4a-4a74-9a60-0d1fa8746e2b
        type: registry
        sub_type: ""
        kind: github
        status: registered
        user_id: 3e2b7f2d-9a6e-4e1f-bc09-1a4c6e8f4a7b
        created_at: "2025-10-06T16:44:52.528781131Z"
        updated_at: "2025-10-06T16:44:52.528781131Z"
        deleted_at: "0001-01-01T00:00:00Z"
        schemaVersion: ""
      connection_id: 5bc80e3c-5d43-9eb4-d16c-78a2769247a6
      category:
        id: 9ca27d0d-66ce-42a9-8c85-6236563f2ddb
        name: Orchestration & Management
      subCategory: Scheduling & Orchestration
      metadata:
        isAnnotation: false
        primaryColor: '#326CE5'
        secondaryColor: '#7aa1f0'
        shape: circle
        styleOverrides: ""
        svgColor: ui/public/static/img/meshmodels/kubernetes/color/kubernetes-color.svg
        svgComplete: ""
        svgWhite: ui/public/static/img/meshmodels/kubernetes/white/kubernetes-white.svg
      model:
        version: v1.32.0-alpha.3
      components_count: 0
      relationships_count: 0
      components: null
      relationships: null
    styles:
      primaryColor: '#326CE5'
      secondaryColor: '#7aa1f0'
      shape: bottom-round-rectangle
      svgColor: ui/public/static/img/meshmodels/kubernetes/color/serviceaccount-color.svg
      svgComplete: ""
      svgWhite: ui/public/static/img/meshmodels/kubernetes/white/serviceaccount-white.svg
    capabilities: []
    status: enabled
    metadata:
      configurationUISchema: ""
      genealogy: ""
      instanceDetails: null
      isAnnotation: false
      isNamespaced: true
      published: false
      source_uri: git://github.com/kubernetes/kubernetes/master/api/openapi-spec/v3
    configuration:
      automountServiceAccountToken: true
      metadata:
        labels:
          app.kubernetes.io/instance: ms-filestorage-worker
          app.kubernetes.io/managed-by: Helm
          app.kubernetes.io/name: ms-filestorage-worker
          app.kubernetes.io/version: 0.0.22
          helm.sh/chart: ms-base-0.0.22
        name: ms-filestorage-worker
    component:
      version: v1
      kind: ServiceAccount
      schema: ""
  - id: 0f8c39cc-3176-469d-932e-c0d2598e3b6c
    schemaVersion: components.meshery.io/v1beta1
    version: v1.0.0
    displayName: ms-filestorage-worker-vaultsecret
    description: ""
    format: ""
    model:
      id: b3f5bc0d-30f7-607d-6c73-784ddde6cad8
      schemaVersion: models.meshery.io/v1beta1
      version: v1.0.0
      name: kubernetes
      displayName: Kubernetes
      status: enabled
      registrant:
        id: 7b1e5d3e-bac8-4e2e-98ab-0e4c6f4b7a9d
        name: Github
        credential_id: 6e4f8b2d-9c5e-4a1b-8e3f-7d1c0b1a4e2b
        type: registry
        sub_type: ""
        kind: github
        status: registered
        user_id: 8e1d9c6b-2f5a-4e9b-8f6e-1a2b3c4d5e6f
        created_at: "2025-10-06T16:44:52.528781131Z"
        updated_at: "2025-10-06T16:44:52.528781131Z"
        deleted_at: "0001-01-01T00:00:00Z"
        schemaVersion: ""
      connection_id: 5bc80e3c-5d43-9eb4-d16c-78a2769247a6
      category:
        id: 9ca27d0d-66ce-42a9-8c85-6236563f2ddb
        name: Orchestration & Management
      subCategory: Scheduling & Orchestration
      metadata:
        isAnnotation: false
        primaryColor: '#326CE5'
        secondaryColor: '#7aa1f0'
        shape: circle
        styleOverrides: ""
        svgColor: ui/public/static/img/meshmodels/kubernetes/color/kubernetes-color.svg
        svgComplete: ""
        svgWhite: ui/public/static/img/meshmodels/kubernetes/white/kubernetes-white.svg
      model:
        version: v1.32.0-alpha.3
      components_count: 0
      relationships_count: 0
      components: null
      relationships: null
    styles:
      background-clip: node
      background-image-containment: over
      background-opacity: 0
      height: 32
      padding: 1
      primaryColor: '#326CE5'
      secondaryColor: '#7aa1f0'
      shape: shield
      svgColor: ui/public/static/img/meshmodels/kubernetes/color/secret-color.svg
      svgComplete: ui/public/static/img/meshmodels/kubernetes/complete/secret-complete.svg
      svgWhite: ui/public/static/img/meshmodels/kubernetes/white/secret-white.svg
      width: 32
    capabilities: []
    status: enabled
    metadata:
      configurationUISchema: ""
      genealogy: ""
      instanceDetails: null
      isAnnotation: false
      isNamespaced: true
      published: false
      source_uri: git://github.com/kubernetes/kubernetes/master/api/openapi-spec/v3
    configuration:
      data:
        token: "<REPLACE_ME>"
      metadata:
        name: ms-filestorage-worker-vaultsecret
      type: Opaque
    component:
      version: v1
      kind: Secret
      schema: ""
  - id: 3f976a1d-5f76-48bb-ac07-633aebd7c855
    schemaVersion: components.meshery.io/v1beta1
    version: v1.0.0
    displayName: ms-filestorage-worker-vaultserver
    description: ""
    format: ""
    model:
      id: b3f5bc0d-30f7-607d-6c73-784ddde6cad8
      schemaVersion: models.meshery.io/v1beta1
      version: v1.0.0
      name: kubernetes
      displayName: Kubernetes
      status: enabled
      registrant:
        id: 9d2e4b1c-7e3a-4f2e-8b1c-6a5e2b3c4d5f
        name: Github
        credential_id: 4b9f8e2a-1d3c-4a7b-8c6e-7f1a2b3d4e5f
        type: registry
        sub_type: ""
        kind: github
        status: registered
        user_id: 3c1a2e4b-7d5f-4a8e-9b1c-6e2a3b4d5f6e
        created_at: "2025-10-06T16:44:52.528781131Z"
        updated_at: "2025-10-06T16:44:52.528781131Z"
        deleted_at: "0001-01-01T00:00:00Z"
        schemaVersion: ""
      connection_id: 5bc80e3c-5d43-9eb4-d16c-78a2769247a6
      category:
        id: 9ca27d0d-66ce-42a9-8c85-6236563f2ddb
        name: Orchestration & Management
      subCategory: Scheduling & Orchestration
      metadata:
        isAnnotation: false
        primaryColor: '#326CE5'
        secondaryColor: '#7aa1f0'
        shape: circle
        styleOverrides: ""
        svgColor: ui/public/static/img/meshmodels/kubernetes/color/kubernetes-color.svg
        svgComplete: ""
        svgWhite: ui/public/static/img/meshmodels/kubernetes/white/kubernetes-white.svg
      model:
        version: v1.32.0-alpha.3
      components_count: 0
      relationships_count: 0
      components: null
      relationships: null
    styles:
      primaryColor: '#326CE5'
      secondaryColor: '#7aa1f0'
      shape: bottom-round-rectangle
      svgColor: ui/public/static/img/meshmodels/kubernetes/color/configmap-color.svg
      svgComplete: ""
      svgWhite: ui/public/static/img/meshmodels/kubernetes/white/configmap-white.svg
    capabilities: []
    status: enabled
    metadata:
      configurationUISchema: ""
      genealogy: ""
      instanceDetails: null
      isAnnotation: false
      isNamespaced: true
      published: false
      source_uri: git://github.com/kubernetes/kubernetes/master/api/openapi-spec/v3
    configuration:
      data:
        server: http://vault-internal.vault-operator.svc.cluster.local:8200
        solution: security-codedesignplus
      metadata:
        name: ms-filestorage-worker-vaultserver
    component:
      version: v1
      kind: ConfigMap
      schema: ""
  - id: deea2bd4-b41b-44f5-8b7b-71aa2dc8338f
    schemaVersion: components.meshery.io/v1beta1
    version: v1.0.0
    displayName: ms-filestorage-worker
    description: ""
    format: ""
    model:
      id: b3f5bc0d-30f7-607d-6c73-784ddde6cad8
      schemaVersion: models.meshery.io/v1beta1
      version: v1.0.0
      name: kubernetes
      displayName: Kubernetes
      status: enabled
      registrant:
        id: 5bc80e3c-5d43-9eb4-d16c-78a2769247a6
        name: Github
        credential_id: 1d2e3c4b-5f6a-4e8b-9c1d-7e2a3b4d5f6e
        type: registry
        sub_type: ""
        kind: github
        status: registered
        user_id: 9b8a7c6e-5d4c-3b2a-1e0f-8c7d6b5a4e3f
        created_at: "2025-10-06T16:44:52.528781131Z"
        updated_at: "2025-10-06T16:44:52.528781131Z"
        deleted_at: "0001-01-01T00:00:00Z"
        schemaVersion: ""
      connection_id: 5bc80e3c-5d43-9eb4-d16c-78a2769247a6
      category:
        id: 9ca27d0d-66ce-42a9-8c85-6236563f2ddb
        name: Orchestration & Management
      subCategory: Scheduling & Orchestration
      metadata:
        isAnnotation: false
        primaryColor: '#326CE5'
        secondaryColor: '#7aa1f0'
        shape: circle
        styleOverrides: ""
        svgColor: ui/public/static/img/meshmodels/kubernetes/color/kubernetes-color.svg
        svgComplete: ""
        svgWhite: ui/public/static/img/meshmodels/kubernetes/white/kubernetes-white.svg
      model:
        version: v1.32.0-alpha.3
      components_count: 0
      relationships_count: 0
      components: null
      relationships: null
    styles:
      background-position-y: "4.5"
      height: 20
      padding: 12
      primaryColor: '#326CE5'
      secondaryColor: '#7aa1f0'
      shape: round-triangle
      svgColor: ui/public/static/img/meshmodels/kubernetes/color/service-color.svg
      svgComplete: ""
      svgWhite: ui/public/static/img/meshmodels/kubernetes/white/service-white.svg
      width: 20
    capabilities: []
    status: enabled
    metadata:
      configurationUISchema: ""
      genealogy: ""
      instanceDetails: null
      isAnnotation: false
      isNamespaced: true
      published: false
      source_uri: git://github.com/kubernetes/kubernetes/master/api/openapi-spec/v3
    configuration:
      metadata:
        labels:
          app.kubernetes.io/instance: ms-filestorage-worker
          app.kubernetes.io/managed-by: Helm
          app.kubernetes.io/name: ms-filestorage-worker
          app.kubernetes.io/version: 0.0.22
          helm.sh/chart: ms-base-0.0.22
        name: ms-filestorage-worker
      spec:
        ports:
          - name: rest
            port: 5000
            protocol: TCP
            targetPort: rest
          - name: grpc
            port: 5001
            protocol: TCP
            targetPort: grpc
        selector:
          app.kubernetes.io/instance: ms-filestorage-worker
          app.kubernetes.io/name: ms-filestorage-worker
        type: ClusterIP
    component:
      version: v1
      kind: Service
      schema: ""
  - id: 8a4467f6-7e96-4af0-8e86-f9864d5be80f
    schemaVersion: components.meshery.io/v1beta1
    version: v1.0.0
    displayName: ms-filestorage-worker
    description: ""
    format: ""
    model:
      id: b3f5bc0d-30f7-607d-6c73-784ddde6cad8
      schemaVersion: models.meshery.io/v1beta1
      version: v1.0.0
      name: kubernetes
      displayName: Kubernetes
      status: enabled
      registrant:
        id: 5bc80e3c-5d43-9eb4-d16c-78a2769247a6
        name: Github
        credential_id: 1d2e3c4b-5f6a-4e8b-9c1d-7e2a3b4d5f6e
        type: registry
        sub_type: ""
        kind: github
        status: registered
        user_id: 9b8a7c6e-5d4c-3b2a-1e0f-8c7d6b5a4e3f
        created_at: "2025-10-06T16:44:52.528781131Z"
        updated_at: "2025-10-06T16:44:52.528781131Z"
        deleted_at: "0001-01-01T00:00:00Z"
        schemaVersion: ""
      connection_id: 5bc80e3c-5d43-9eb4-d16c-78a2769247a6
      category:
        id: 9ca27d0d-66ce-42a9-8c85-6236563f2ddb
        name: Orchestration & Management
      subCategory: Scheduling & Orchestration
      metadata:
        isAnnotation: false
        primaryColor: '#326CE5'
        secondaryColor: '#7aa1f0'
        shape: circle
        styleOverrides: ""
        svgColor: ui/public/static/img/meshmodels/kubernetes/color/kubernetes-color.svg
        svgComplete: ""
        svgWhite: ui/public/static/img/meshmodels/kubernetes/white/kubernetes-white.svg
      model:
        version: v1.32.0-alpha.3
      components_count: 0
      relationships_count: 0
      components: null
      relationships: null
    styles:
      background-image: none
      background-opacity: 0.5
      border-width: 2
      primaryColor: '#326CE5'
      secondaryColor: '#7aa1f0'
      shape: round-rectangle
      svgColor: ui/public/static/img/meshmodels/kubernetes/color/deployment-color.svg
      svgComplete: ui/public/static/img/meshmodels/kubernetes/complete/deployment-complete.svg
      svgWhite: ui/public/static/img/meshmodels/kubernetes/white/deployment-white.svg
    capabilities: []
    status: enabled
    metadata:
      configurationUISchema: ""
      genealogy: parent
      instanceDetails: null
      isAnnotation: false
      isNamespaced: true
      published: false
      source_uri: git://github.com/kubernetes/kubernetes/master/api/openapi-spec/v3
    configuration:
      metadata:
        labels:
          app.kubernetes.io/instance: ms-filestorage-worker
          app.kubernetes.io/managed-by: Helm
          app.kubernetes.io/name: ms-filestorage-worker
          app.kubernetes.io/version: 0.0.22
          helm.sh/chart: ms-base-0.0.22
        name: ms-filestorage-worker
      spec:
        selector:
          matchLabels:
            app.kubernetes.io/instance: ms-filestorage-worker
            app.kubernetes.io/name: ms-filestorage-worker
        template:
          metadata:
            labels:
              app.kubernetes.io/instance: ms-filestorage-worker
              app.kubernetes.io/managed-by: Helm
              app.kubernetes.io/name: ms-filestorage-worker
              app.kubernetes.io/version: 0.0.22
              helm.sh/chart: ms-base-0.0.22
          spec:
            containers:
              - env:
                  - name: ASPNETCORE_ENVIRONMENT
                    value: Staging
                  - name: OTEL_RESOURCE_ATTRIBUTES
                    value: service.name=ms-filestorage-worker,service.namespace=default,service.instance.id=ms-filestorage-worker,deployment.environment=Staging
                  - name: VAULT__TOKEN
                    valueFrom:
                      secretKeyRef:
                        key: token
                        name: ms-filestorage-worker-vaultsecret
                  - name: VAULT__ADDRESS
                    valueFrom:
                      configMapKeyRef:
                        key: server
                        name: ms-filestorage-worker-vaultserver
                  - name: VAULT__SOLUTION
                    valueFrom:
                      configMapKeyRef:
                        key: solution
                        name: ms-filestorage-worker-vaultserver
                image: codedesignplus/ms-filestorage-worker:0.0.11
                imagePullPolicy: Always
                livenessProbe:
                  httpGet:
                    path: /health/live
                    port: rest
                name: ms-base
                ports:
                  - containerPort: 5000
                    name: rest
                    protocol: TCP
                  - containerPort: 5001
                    name: grpc
                    protocol: TCP
                readinessProbe:
                  httpGet:
                    path: /health/ready
                    port: rest
                resources:
                  limits:
                    cpu: 100m
                    memory: 128Mi
                  requests:
                    cpu: 100m
                    memory: 128Mi
            serviceAccountName: ms-filestorage-worker
    component:
      version: apps/v1
      kind: Deployment
      schema: ""
relationships: null
