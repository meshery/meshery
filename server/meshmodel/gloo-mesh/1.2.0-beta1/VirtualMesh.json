{"kind":"VirtualMesh","apiVersion":"networking.mesh.gloo.solo.io/v1","displayName":"Virtual Mesh","format":"JSON","hostname":"","hostID":"00000000-0000-0000-0000-000000000000","displayhostname":"","metadata":{"capabilities":"","genealogy":"","isAnnotation":false,"isModelAnnotation":"FALSE","isNamespaced":true,"logoURL":"","model":"gloo-mesh","modelDisplayName":"gloo-mesh","primaryColor":"#00B39F","published":false,"secondaryColor":"#00D3A9","shape":"circle","styleOverrides":"","subCategory":"Uncategorized","svgColor":"","svgComplete":"","svgWhite":""},"model":{"name":"gloo-mesh","version":"1.2.0-beta1","displayName":"gloo-mesh","hostname":"","hostID":"00000000-0000-0000-0000-000000000000","displayhostname":"","category":{"name":"Uncategorized","metadata":null},"metadata":{"source_uri":"https://storage.googleapis.com/gloo-mesh/gloo-mesh/gloo-mesh-1.2.0-beta1.tgz"},"components":null,"relationships":null},"schema":"{\n \"properties\": {\n  \"spec\": {\n   \"description\": \"Represents a logical grouping of Meshes for shared configuration and cross-mesh interoperability.\",\n   \"properties\": {\n    \"federation\": {\n     \"description\": \"Specify how to federate Destinations across service mesh boundaries.\",\n     \"oneOf\": [\n      {\n       \"not\": {\n        \"anyOf\": [\n         {\n          \"required\": [\n           \"permissive\"\n          ]\n         }\n        ]\n       }\n      },\n      {\n       \"required\": [\n        \"permissive\"\n       ]\n      }\n     ],\n     \"properties\": {\n      \"flatNetwork\": {\n       \"description\": \"If true, all multicluster traffic will be routed directly to the Kubernetes service endpoints of the Destinations,\\nrather than through an ingress gateway. This mode requires a flat network environment.\\nThis feature is exclusive to Gloo Mesh Enterprise.\",\n       \"type\": \"boolean\"\n      },\n      \"hostnameSuffix\": {\n       \"description\": \"Configure the suffix for hostnames of Destinations federated within this VirtualMesh.\\nCurrently this is only supported for Istio with [smart DNS proxying enabled](https://istio.io/latest/blog/2020/dns-proxy/),\\notherwise setting this field results in an error.\\nIf omitted, the hostname suffix defaults to \\\"global\\\".\",\n       \"type\": \"string\"\n      },\n      \"ingressGatewaySelectors\": {\n       \"description\": \"Selects the Destination(s) acting as ingress gateways for cross cluster traffic.\\nThe supplied IngressGatewaySelectors will be used to select ingress gateways for all Meshes in this VirtualMesh.\",\n       \"items\": {\n        \"properties\": {\n         \"destinationSelectors\": {\n          \"description\": \"The set of Destinations that will be used as ingress gateways for external traffic entering the Mesh.\\nIf omitted, a mesh-specific default ingress gateway destination will be used.\\nFor Istio, any Kubernetes Service(s) with the label pair `{\\\"istio\\\": \\\"ingressgateway\\\"}` will be selected.\",\n          \"items\": {\n           \"properties\": {\n            \"kubeServiceMatcher\": {\n             \"description\": \"Match Kubernetes Services by their labels, namespaces, and/or clusters.\",\n             \"properties\": {\n              \"clusters\": {\n               \"description\": \"If specified, match Kubernetes Services if they exist in one of the specified clusters.\\n           When used in a networking policy, omission matches any cluster.\\n           When used in a Gloo Mesh Role, a wildcard (`\\\"*\\\"`) must be specified to match any cluster.\",\n               \"items\": {\n                \"type\": \"string\"\n               },\n               \"type\": \"array\"\n              },\n              \"labels\": {\n               \"additionalProperties\": {\n                \"type\": \"string\"\n               },\n               \"description\": \"If specified, a match requires all labels to exist on a Kubernetes Service.\\n           When used in a networking policy, omission matches any labels.\\n           When used in a Gloo Mesh Role, a wildcard (`\\\"*\\\"`) must be specified to match any label key and/or value.\",\n               \"type\": \"object\"\n              },\n              \"namespaces\": {\n               \"description\": \"If specified, match Kubernetes Services if they exist in one of the specified namespaces.\\n           When used in a networking policy, omission matches any namespace.\\n           When used in a Gloo Mesh Role, a wildcard (`\\\"*\\\"`) must be specified to match any namespace.\",\n               \"items\": {\n                \"type\": \"string\"\n               },\n               \"type\": \"array\"\n              }\n             },\n             \"type\": \"object\"\n            },\n            \"kubeServiceRefs\": {\n             \"description\": \"Match Kubernetes Services by direct reference.\",\n             \"properties\": {\n              \"services\": {\n               \"description\": \"Match Kubernetes Services by direct reference. All fields are required.\\n           When used in a Gloo Mesh Role, a wildcard (`\\\"*\\\"`) must be specified to match any value for the given field.\",\n               \"items\": {\n                \"properties\": {\n                 \"clusterName\": {\n                  \"description\": \"name of the cluster in which the resource exists\",\n                  \"type\": \"string\"\n                 },\n                 \"name\": {\n                  \"description\": \"name of the resource being referenced\",\n                  \"type\": \"string\"\n                 },\n                 \"namespace\": {\n                  \"description\": \"namespace of the resource being referenced\",\n                  \"type\": \"string\"\n                 }\n                },\n                \"type\": \"object\"\n               },\n               \"type\": \"array\"\n              }\n             },\n             \"type\": \"object\"\n            }\n           },\n           \"type\": \"object\"\n          },\n          \"type\": \"array\"\n         },\n         \"portName\": {\n          \"description\": \"Specify the name of the port on the ingress gateway service. If not specified, will default to \\\"tls\\\".\",\n          \"type\": \"string\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"type\": \"array\"\n      },\n      \"permissive\": {\n       \"description\": \"DEPRECATED: Use `selectors` with an empty selector (i.e. `{}`) for permissive semantics.\\nExpose all Destinations to all Workloads in this VirtualMesh.\",\n       \"maxProperties\": 0,\n       \"type\": \"object\"\n      },\n      \"selectors\": {\n       \"description\": \"Selectively federate Destinations to specific external meshes.\\nIf omitted, no Destinations will be federated.\",\n       \"items\": {\n        \"properties\": {\n         \"destinationSelectors\": {\n          \"description\": \"The set of Destinations that will be federated to external Meshes.\\nIf omitted, all Destinations will be selected.\",\n          \"items\": {\n           \"properties\": {\n            \"kubeServiceMatcher\": {\n             \"description\": \"Match Kubernetes Services by their labels, namespaces, and/or clusters.\",\n             \"properties\": {\n              \"clusters\": {\n               \"description\": \"If specified, match Kubernetes Services if they exist in one of the specified clusters.\\n           When used in a networking policy, omission matches any cluster.\\n           When used in a Gloo Mesh Role, a wildcard (`\\\"*\\\"`) must be specified to match any cluster.\",\n               \"items\": {\n                \"type\": \"string\"\n               },\n               \"type\": \"array\"\n              },\n              \"labels\": {\n               \"additionalProperties\": {\n                \"type\": \"string\"\n               },\n               \"description\": \"If specified, a match requires all labels to exist on a Kubernetes Service.\\n           When used in a networking policy, omission matches any labels.\\n           When used in a Gloo Mesh Role, a wildcard (`\\\"*\\\"`) must be specified to match any label key and/or value.\",\n               \"type\": \"object\"\n              },\n              \"namespaces\": {\n               \"description\": \"If specified, match Kubernetes Services if they exist in one of the specified namespaces.\\n           When used in a networking policy, omission matches any namespace.\\n           When used in a Gloo Mesh Role, a wildcard (`\\\"*\\\"`) must be specified to match any namespace.\",\n               \"items\": {\n                \"type\": \"string\"\n               },\n               \"type\": \"array\"\n              }\n             },\n             \"type\": \"object\"\n            },\n            \"kubeServiceRefs\": {\n             \"description\": \"Match Kubernetes Services by direct reference.\",\n             \"properties\": {\n              \"services\": {\n               \"description\": \"Match Kubernetes Services by direct reference. All fields are required.\\n           When used in a Gloo Mesh Role, a wildcard (`\\\"*\\\"`) must be specified to match any value for the given field.\",\n               \"items\": {\n                \"properties\": {\n                 \"clusterName\": {\n                  \"description\": \"name of the cluster in which the resource exists\",\n                  \"type\": \"string\"\n                 },\n                 \"name\": {\n                  \"description\": \"name of the resource being referenced\",\n                  \"type\": \"string\"\n                 },\n                 \"namespace\": {\n                  \"description\": \"namespace of the resource being referenced\",\n                  \"type\": \"string\"\n                 }\n                },\n                \"type\": \"object\"\n               },\n               \"type\": \"array\"\n              }\n             },\n             \"type\": \"object\"\n            }\n           },\n           \"type\": \"object\"\n          },\n          \"type\": \"array\"\n         },\n         \"meshes\": {\n          \"description\": \"The Meshes to which the selected Destinations will be federated. All referenced Meshes must exist in this VirtualMesh.\\nIf omitted, the selected Destinations will be federated to all Meshes in the VirtualMesh.\",\n          \"items\": {\n           \"properties\": {\n            \"name\": {\n             \"description\": \"name of the resource being referenced\",\n             \"type\": \"string\"\n            },\n            \"namespace\": {\n             \"description\": \"namespace of the resource being referenced\",\n             \"type\": \"string\"\n            }\n           },\n           \"type\": \"object\"\n          },\n          \"type\": \"array\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"type\": \"array\"\n      },\n      \"tcpKeepalive\": {\n       \"description\": \"Specify a keepalive rule for all requests made within the VirtualMesh which cross clusters within that VirtualMesh,\\nas well as any requests to externalService type destinations.\",\n       \"properties\": {\n        \"interval\": {\n         \"description\": \"The time duration between keep-alive probes.\\nFormat examples: `1h`/`1m`/`1s`/`1ms`\",\n         \"type\": \"string\"\n        },\n        \"probes\": {\n         \"description\": \"Maximum number of TCP keepalive probes to send before determining that connection is dead.\",\n         \"maximum\": 4294967295,\n         \"minimum\": 0,\n         \"type\": \"integer\"\n        },\n        \"time\": {\n         \"description\": \"The time duration a connection needs to be idle before keep-alive probes start being sent.\\nFormat examples: `1h`/`1m`/`1s`/`1ms`.\",\n         \"type\": \"string\"\n        }\n       },\n       \"type\": \"object\"\n      }\n     },\n     \"type\": \"object\"\n    },\n    \"globalAccessPolicy\": {\n     \"description\": \"Specify a global access policy for all Workloads and Destinations associated with this VirtualMesh.\",\n     \"enum\": [\n      \"MESH_DEFAULT\",\n      \"ENABLED\",\n      \"DISABLED\"\n     ],\n     \"type\": \"string\"\n    },\n    \"meshes\": {\n     \"description\": \"Specify the Meshes configured by this VirtualMesh.\",\n     \"items\": {\n      \"properties\": {\n       \"name\": {\n        \"description\": \"name of the resource being referenced\",\n        \"type\": \"string\"\n       },\n       \"namespace\": {\n        \"description\": \"namespace of the resource being referenced\",\n        \"type\": \"string\"\n       }\n      },\n      \"type\": \"object\"\n     },\n     \"type\": \"array\"\n    },\n    \"mtlsConfig\": {\n     \"description\": \"Specify mTLS options.\",\n     \"oneOf\": [\n      {\n       \"not\": {\n        \"anyOf\": [\n         {\n          \"properties\": {\n           \"shared\": {\n            \"oneOf\": [\n             {\n              \"not\": {\n               \"anyOf\": [\n                {\n                 \"properties\": {\n                  \"rootCertificateAuthority\": {\n                   \"oneOf\": [\n                    {\n                     \"not\": {\n                      \"anyOf\": [\n                       {\n                        \"required\": [\n                         \"generated\"\n                        ]\n                       },\n                       {\n                        \"required\": [\n                         \"secret\"\n                        ]\n                       }\n                      ]\n                     }\n                    },\n                    {\n                     \"required\": [\n                      \"generated\"\n                     ]\n                    },\n                    {\n                     \"required\": [\n                      \"secret\"\n                     ]\n                    }\n                   ]\n                  }\n                 },\n                 \"required\": [\n                  \"rootCertificateAuthority\"\n                 ]\n                },\n                {\n                 \"properties\": {\n                  \"intermediateCertificateAuthority\": {\n                   \"oneOf\": [\n                    {\n                     \"not\": {\n                      \"anyOf\": [\n                       {\n                        \"properties\": {\n                         \"vault\": {\n                          \"oneOf\": [\n                           {\n                            \"not\": {\n                             \"anyOf\": [\n                              {\n                               \"required\": [\n                                \"tokenSecretRef\"\n                               ]\n                              },\n                              {\n                               \"properties\": {\n                                \"kubernetesAuth\": {\n                                 \"oneOf\": [\n                                  {\n                                   \"not\": {\n                                    \"anyOf\": [\n                                     {\n                                      \"required\": [\n                                       \"serviceAccountRef\"\n                                      ]\n                                     },\n                                     {\n                                      \"required\": [\n                                       \"mountedSaPath\"\n                                      ]\n                                     }\n                                    ]\n                                   }\n                                  },\n                                  {\n                                   \"required\": [\n                                    \"serviceAccountRef\"\n                                   ]\n                                  },\n                                  {\n                                   \"required\": [\n                                    \"mountedSaPath\"\n                                   ]\n                                  }\n                                 ]\n                                }\n                               },\n                               \"required\": [\n                                \"kubernetesAuth\"\n                               ]\n                              }\n                             ]\n                            }\n                           },\n                           {\n                            \"required\": [\n                             \"tokenSecretRef\"\n                            ]\n                           },\n                           {\n                            \"properties\": {\n                             \"kubernetesAuth\": {\n                              \"oneOf\": [\n                               {\n                                \"not\": {\n                                 \"anyOf\": [\n                                  {\n                                   \"required\": [\n                                    \"serviceAccountRef\"\n                                   ]\n                                  },\n                                  {\n                                   \"required\": [\n                                    \"mountedSaPath\"\n                                   ]\n                                  }\n                                 ]\n                                }\n                               },\n                               {\n                                \"required\": [\n                                 \"serviceAccountRef\"\n                                ]\n                               },\n                               {\n                                \"required\": [\n                                 \"mountedSaPath\"\n                                ]\n                               }\n                              ]\n                             }\n                            },\n                            \"required\": [\n                             \"kubernetesAuth\"\n                            ]\n                           }\n                          ]\n                         }\n                        },\n                        \"required\": [\n                         \"vault\"\n                        ]\n                       }\n                      ]\n                     }\n                    },\n                    {\n                     \"properties\": {\n                      \"vault\": {\n                       \"oneOf\": [\n                        {\n                         \"not\": {\n                          \"anyOf\": [\n                           {\n                            \"required\": [\n                             \"tokenSecretRef\"\n                            ]\n                           },\n                           {\n                            \"properties\": {\n                             \"kubernetesAuth\": {\n                              \"oneOf\": [\n                               {\n                                \"not\": {\n                                 \"anyOf\": [\n                                  {\n                                   \"required\": [\n                                    \"serviceAccountRef\"\n                                   ]\n                                  },\n                                  {\n                                   \"required\": [\n                                    \"mountedSaPath\"\n                                   ]\n                                  }\n                                 ]\n                                }\n                               },\n                               {\n                                \"required\": [\n                                 \"serviceAccountRef\"\n                                ]\n                               },\n                               {\n                                \"required\": [\n                                 \"mountedSaPath\"\n                                ]\n                               }\n                              ]\n                             }\n                            },\n                            \"required\": [\n                             \"kubernetesAuth\"\n                            ]\n                           }\n                          ]\n                         }\n                        },\n                        {\n                         \"required\": [\n                          \"tokenSecretRef\"\n                         ]\n                        },\n                        {\n                         \"properties\": {\n                          \"kubernetesAuth\": {\n                           \"oneOf\": [\n                            {\n                             \"not\": {\n                              \"anyOf\": [\n                               {\n                                \"required\": [\n                                 \"serviceAccountRef\"\n                                ]\n                               },\n                               {\n                                \"required\": [\n                                 \"mountedSaPath\"\n                                ]\n                               }\n                              ]\n                             }\n                            },\n                            {\n                             \"required\": [\n                              \"serviceAccountRef\"\n                             ]\n                            },\n                            {\n                             \"required\": [\n                              \"mountedSaPath\"\n                             ]\n                            }\n                           ]\n                          }\n                         },\n                         \"required\": [\n                          \"kubernetesAuth\"\n                         ]\n                        }\n                       ]\n                      }\n                     },\n                     \"required\": [\n                      \"vault\"\n                     ]\n                    }\n                   ]\n                  }\n                 },\n                 \"required\": [\n                  \"intermediateCertificateAuthority\"\n                 ]\n                }\n               ]\n              }\n             },\n             {\n              \"properties\": {\n               \"rootCertificateAuthority\": {\n                \"oneOf\": [\n                 {\n                  \"not\": {\n                   \"anyOf\": [\n                    {\n                     \"required\": [\n                      \"generated\"\n                     ]\n                    },\n                    {\n                     \"required\": [\n                      \"secret\"\n                     ]\n                    }\n                   ]\n                  }\n                 },\n                 {\n                  \"required\": [\n                   \"generated\"\n                  ]\n                 },\n                 {\n                  \"required\": [\n                   \"secret\"\n                  ]\n                 }\n                ]\n               }\n              },\n              \"required\": [\n               \"rootCertificateAuthority\"\n              ]\n             },\n             {\n              \"properties\": {\n               \"intermediateCertificateAuthority\": {\n                \"oneOf\": [\n                 {\n                  \"not\": {\n                   \"anyOf\": [\n                    {\n                     \"properties\": {\n                      \"vault\": {\n                       \"oneOf\": [\n                        {\n                         \"not\": {\n                          \"anyOf\": [\n                           {\n                            \"required\": [\n                             \"tokenSecretRef\"\n                            ]\n                           },\n                           {\n                            \"properties\": {\n                             \"kubernetesAuth\": {\n                              \"oneOf\": [\n                               {\n                                \"not\": {\n                                 \"anyOf\": [\n                                  {\n                                   \"required\": [\n                                    \"serviceAccountRef\"\n                                   ]\n                                  },\n                                  {\n                                   \"required\": [\n                                    \"mountedSaPath\"\n                                   ]\n                                  }\n                                 ]\n                                }\n                               },\n                               {\n                                \"required\": [\n                                 \"serviceAccountRef\"\n                                ]\n                               },\n                               {\n                                \"required\": [\n                                 \"mountedSaPath\"\n                                ]\n                               }\n                              ]\n                             }\n                            },\n                            \"required\": [\n                             \"kubernetesAuth\"\n                            ]\n                           }\n                          ]\n                         }\n                        },\n                        {\n                         \"required\": [\n                          \"tokenSecretRef\"\n                         ]\n                        },\n                        {\n                         \"properties\": {\n                          \"kubernetesAuth\": {\n                           \"oneOf\": [\n                            {\n                             \"not\": {\n                              \"anyOf\": [\n                               {\n                                \"required\": [\n                                 \"serviceAccountRef\"\n                                ]\n                               },\n                               {\n                                \"required\": [\n                                 \"mountedSaPath\"\n                                ]\n                               }\n                              ]\n                             }\n                            },\n                            {\n                             \"required\": [\n                              \"serviceAccountRef\"\n                             ]\n                            },\n                            {\n                             \"required\": [\n                              \"mountedSaPath\"\n                             ]\n                            }\n                           ]\n                          }\n                         },\n                         \"required\": [\n                          \"kubernetesAuth\"\n                         ]\n                        }\n                       ]\n                      }\n                     },\n                     \"required\": [\n                      \"vault\"\n                     ]\n                    }\n                   ]\n                  }\n                 },\n                 {\n                  \"properties\": {\n                   \"vault\": {\n                    \"oneOf\": [\n                     {\n                      \"not\": {\n                       \"anyOf\": [\n                        {\n                         \"required\": [\n                          \"tokenSecretRef\"\n                         ]\n                        },\n                        {\n                         \"properties\": {\n                          \"kubernetesAuth\": {\n                           \"oneOf\": [\n                            {\n                             \"not\": {\n                              \"anyOf\": [\n                               {\n                                \"required\": [\n                                 \"serviceAccountRef\"\n                                ]\n                               },\n                               {\n                                \"required\": [\n                                 \"mountedSaPath\"\n                                ]\n                               }\n                              ]\n                             }\n                            },\n                            {\n                             \"required\": [\n                              \"serviceAccountRef\"\n                             ]\n                            },\n                            {\n                             \"required\": [\n                              \"mountedSaPath\"\n                             ]\n                            }\n                           ]\n                          }\n                         },\n                         \"required\": [\n                          \"kubernetesAuth\"\n                         ]\n                        }\n                       ]\n                      }\n                     },\n                     {\n                      \"required\": [\n                       \"tokenSecretRef\"\n                      ]\n                     },\n                     {\n                      \"properties\": {\n                       \"kubernetesAuth\": {\n                        \"oneOf\": [\n                         {\n                          \"not\": {\n                           \"anyOf\": [\n                            {\n                             \"required\": [\n                              \"serviceAccountRef\"\n                             ]\n                            },\n                            {\n                             \"required\": [\n                              \"mountedSaPath\"\n                             ]\n                            }\n                           ]\n                          }\n                         },\n                         {\n                          \"required\": [\n                           \"serviceAccountRef\"\n                          ]\n                         },\n                         {\n                          \"required\": [\n                           \"mountedSaPath\"\n                          ]\n                         }\n                        ]\n                       }\n                      },\n                      \"required\": [\n                       \"kubernetesAuth\"\n                      ]\n                     }\n                    ]\n                   }\n                  },\n                  \"required\": [\n                   \"vault\"\n                  ]\n                 }\n                ]\n               }\n              },\n              \"required\": [\n               \"intermediateCertificateAuthority\"\n              ]\n             }\n            ]\n           }\n          },\n          \"required\": [\n           \"shared\"\n          ]\n         },\n         {\n          \"required\": [\n           \"limited\"\n          ]\n         }\n        ]\n       }\n      },\n      {\n       \"properties\": {\n        \"shared\": {\n         \"oneOf\": [\n          {\n           \"not\": {\n            \"anyOf\": [\n             {\n              \"properties\": {\n               \"rootCertificateAuthority\": {\n                \"oneOf\": [\n                 {\n                  \"not\": {\n                   \"anyOf\": [\n                    {\n                     \"required\": [\n                      \"generated\"\n                     ]\n                    },\n                    {\n                     \"required\": [\n                      \"secret\"\n                     ]\n                    }\n                   ]\n                  }\n                 },\n                 {\n                  \"required\": [\n                   \"generated\"\n                  ]\n                 },\n                 {\n                  \"required\": [\n                   \"secret\"\n                  ]\n                 }\n                ]\n               }\n              },\n              \"required\": [\n               \"rootCertificateAuthority\"\n              ]\n             },\n             {\n              \"properties\": {\n               \"intermediateCertificateAuthority\": {\n                \"oneOf\": [\n                 {\n                  \"not\": {\n                   \"anyOf\": [\n                    {\n                     \"properties\": {\n                      \"vault\": {\n                       \"oneOf\": [\n                        {\n                         \"not\": {\n                          \"anyOf\": [\n                           {\n                            \"required\": [\n                             \"tokenSecretRef\"\n                            ]\n                           },\n                           {\n                            \"properties\": {\n                             \"kubernetesAuth\": {\n                              \"oneOf\": [\n                               {\n                                \"not\": {\n                                 \"anyOf\": [\n                                  {\n                                   \"required\": [\n                                    \"serviceAccountRef\"\n                                   ]\n                                  },\n                                  {\n                                   \"required\": [\n                                    \"mountedSaPath\"\n                                   ]\n                                  }\n                                 ]\n                                }\n                               },\n                               {\n                                \"required\": [\n                                 \"serviceAccountRef\"\n                                ]\n                               },\n                               {\n                                \"required\": [\n                                 \"mountedSaPath\"\n                                ]\n                               }\n                              ]\n                             }\n                            },\n                            \"required\": [\n                             \"kubernetesAuth\"\n                            ]\n                           }\n                          ]\n                         }\n                        },\n                        {\n                         \"required\": [\n                          \"tokenSecretRef\"\n                         ]\n                        },\n                        {\n                         \"properties\": {\n                          \"kubernetesAuth\": {\n                           \"oneOf\": [\n                            {\n                             \"not\": {\n                              \"anyOf\": [\n                               {\n                                \"required\": [\n                                 \"serviceAccountRef\"\n                                ]\n                               },\n                               {\n                                \"required\": [\n                                 \"mountedSaPath\"\n                                ]\n                               }\n                              ]\n                             }\n                            },\n                            {\n                             \"required\": [\n                              \"serviceAccountRef\"\n                             ]\n                            },\n                            {\n                             \"required\": [\n                              \"mountedSaPath\"\n                             ]\n                            }\n                           ]\n                          }\n                         },\n                         \"required\": [\n                          \"kubernetesAuth\"\n                         ]\n                        }\n                       ]\n                      }\n                     },\n                     \"required\": [\n                      \"vault\"\n                     ]\n                    }\n                   ]\n                  }\n                 },\n                 {\n                  \"properties\": {\n                   \"vault\": {\n                    \"oneOf\": [\n                     {\n                      \"not\": {\n                       \"anyOf\": [\n                        {\n                         \"required\": [\n                          \"tokenSecretRef\"\n                         ]\n                        },\n                        {\n                         \"properties\": {\n                          \"kubernetesAuth\": {\n                           \"oneOf\": [\n                            {\n                             \"not\": {\n                              \"anyOf\": [\n                               {\n                                \"required\": [\n                                 \"serviceAccountRef\"\n                                ]\n                               },\n                               {\n                                \"required\": [\n                                 \"mountedSaPath\"\n                                ]\n                               }\n                              ]\n                             }\n                            },\n                            {\n                             \"required\": [\n                              \"serviceAccountRef\"\n                             ]\n                            },\n                            {\n                             \"required\": [\n                              \"mountedSaPath\"\n                             ]\n                            }\n                           ]\n                          }\n                         },\n                         \"required\": [\n                          \"kubernetesAuth\"\n                         ]\n                        }\n                       ]\n                      }\n                     },\n                     {\n                      \"required\": [\n                       \"tokenSecretRef\"\n                      ]\n                     },\n                     {\n                      \"properties\": {\n                       \"kubernetesAuth\": {\n                        \"oneOf\": [\n                         {\n                          \"not\": {\n                           \"anyOf\": [\n                            {\n                             \"required\": [\n                              \"serviceAccountRef\"\n                             ]\n                            },\n                            {\n                             \"required\": [\n                              \"mountedSaPath\"\n                             ]\n                            }\n                           ]\n                          }\n                         },\n                         {\n                          \"required\": [\n                           \"serviceAccountRef\"\n                          ]\n                         },\n                         {\n                          \"required\": [\n                           \"mountedSaPath\"\n                          ]\n                         }\n                        ]\n                       }\n                      },\n                      \"required\": [\n                       \"kubernetesAuth\"\n                      ]\n                     }\n                    ]\n                   }\n                  },\n                  \"required\": [\n                   \"vault\"\n                  ]\n                 }\n                ]\n               }\n              },\n              \"required\": [\n               \"intermediateCertificateAuthority\"\n              ]\n             }\n            ]\n           }\n          },\n          {\n           \"properties\": {\n            \"rootCertificateAuthority\": {\n             \"oneOf\": [\n              {\n               \"not\": {\n                \"anyOf\": [\n                 {\n                  \"required\": [\n                   \"generated\"\n                  ]\n                 },\n                 {\n                  \"required\": [\n                   \"secret\"\n                  ]\n                 }\n                ]\n               }\n              },\n              {\n               \"required\": [\n                \"generated\"\n               ]\n              },\n              {\n               \"required\": [\n                \"secret\"\n               ]\n              }\n             ]\n            }\n           },\n           \"required\": [\n            \"rootCertificateAuthority\"\n           ]\n          },\n          {\n           \"properties\": {\n            \"intermediateCertificateAuthority\": {\n             \"oneOf\": [\n              {\n               \"not\": {\n                \"anyOf\": [\n                 {\n                  \"properties\": {\n                   \"vault\": {\n                    \"oneOf\": [\n                     {\n                      \"not\": {\n                       \"anyOf\": [\n                        {\n                         \"required\": [\n                          \"tokenSecretRef\"\n                         ]\n                        },\n                        {\n                         \"properties\": {\n                          \"kubernetesAuth\": {\n                           \"oneOf\": [\n                            {\n                             \"not\": {\n                              \"anyOf\": [\n                               {\n                                \"required\": [\n                                 \"serviceAccountRef\"\n                                ]\n                               },\n                               {\n                                \"required\": [\n                                 \"mountedSaPath\"\n                                ]\n                               }\n                              ]\n                             }\n                            },\n                            {\n                             \"required\": [\n                              \"serviceAccountRef\"\n                             ]\n                            },\n                            {\n                             \"required\": [\n                              \"mountedSaPath\"\n                             ]\n                            }\n                           ]\n                          }\n                         },\n                         \"required\": [\n                          \"kubernetesAuth\"\n                         ]\n                        }\n                       ]\n                      }\n                     },\n                     {\n                      \"required\": [\n                       \"tokenSecretRef\"\n                      ]\n                     },\n                     {\n                      \"properties\": {\n                       \"kubernetesAuth\": {\n                        \"oneOf\": [\n                         {\n                          \"not\": {\n                           \"anyOf\": [\n                            {\n                             \"required\": [\n                              \"serviceAccountRef\"\n                             ]\n                            },\n                            {\n                             \"required\": [\n                              \"mountedSaPath\"\n                             ]\n                            }\n                           ]\n                          }\n                         },\n                         {\n                          \"required\": [\n                           \"serviceAccountRef\"\n                          ]\n                         },\n                         {\n                          \"required\": [\n                           \"mountedSaPath\"\n                          ]\n                         }\n                        ]\n                       }\n                      },\n                      \"required\": [\n                       \"kubernetesAuth\"\n                      ]\n                     }\n                    ]\n                   }\n                  },\n                  \"required\": [\n                   \"vault\"\n                  ]\n                 }\n                ]\n               }\n              },\n              {\n               \"properties\": {\n                \"vault\": {\n                 \"oneOf\": [\n                  {\n                   \"not\": {\n                    \"anyOf\": [\n                     {\n                      \"required\": [\n                       \"tokenSecretRef\"\n                      ]\n                     },\n                     {\n                      \"properties\": {\n                       \"kubernetesAuth\": {\n                        \"oneOf\": [\n                         {\n                          \"not\": {\n                           \"anyOf\": [\n                            {\n                             \"required\": [\n                              \"serviceAccountRef\"\n                             ]\n                            },\n                            {\n                             \"required\": [\n                              \"mountedSaPath\"\n                             ]\n                            }\n                           ]\n                          }\n                         },\n                         {\n                          \"required\": [\n                           \"serviceAccountRef\"\n                          ]\n                         },\n                         {\n                          \"required\": [\n                           \"mountedSaPath\"\n                          ]\n                         }\n                        ]\n                       }\n                      },\n                      \"required\": [\n                       \"kubernetesAuth\"\n                      ]\n                     }\n                    ]\n                   }\n                  },\n                  {\n                   \"required\": [\n                    \"tokenSecretRef\"\n                   ]\n                  },\n                  {\n                   \"properties\": {\n                    \"kubernetesAuth\": {\n                     \"oneOf\": [\n                      {\n                       \"not\": {\n                        \"anyOf\": [\n                         {\n                          \"required\": [\n                           \"serviceAccountRef\"\n                          ]\n                         },\n                         {\n                          \"required\": [\n                           \"mountedSaPath\"\n                          ]\n                         }\n                        ]\n                       }\n                      },\n                      {\n                       \"required\": [\n                        \"serviceAccountRef\"\n                       ]\n                      },\n                      {\n                       \"required\": [\n                        \"mountedSaPath\"\n                       ]\n                      }\n                     ]\n                    }\n                   },\n                   \"required\": [\n                    \"kubernetesAuth\"\n                   ]\n                  }\n                 ]\n                }\n               },\n               \"required\": [\n                \"vault\"\n               ]\n              }\n             ]\n            }\n           },\n           \"required\": [\n            \"intermediateCertificateAuthority\"\n           ]\n          }\n         ]\n        }\n       },\n       \"required\": [\n        \"shared\"\n       ]\n      },\n      {\n       \"required\": [\n        \"limited\"\n       ]\n      }\n     ],\n     \"properties\": {\n      \"autoRestartPods\": {\n       \"description\": \"NOTE: THIS IS NOT A RECOMMENDED SETTING FOR PRODUCTION!\\nSpecify whether to allow Gloo Mesh to restart Kubernetes Pods when certificates are rotated when establishing shared trust.\\nThis will auto-restart ALL of the workloads in your mesh. It is a convenience feature while testing Gloo Mesh.\\nIf this option is not explicitly enabled,\\nusers must restart Pods manually for the new certificates to be picked up.\\n`meshctl` provides the command `meshctl mesh restart` to simplify this process, see [here]({{\\u003c versioned_link_path fromRoot=\\\"reference/cli/meshctl_mesh_restart/\\\" \\u003e}}) for more info.\",\n       \"type\": \"boolean\"\n      },\n      \"limited\": {\n       \"description\": \"Limited trust (selectively allow communication between Workloads and Destinations in the grouped Meshes). *Currently not available.*\",\n       \"type\": \"object\"\n      },\n      \"rotationStrategy\": {\n       \"description\": \"Type of rotation to use.\",\n       \"enum\": [\n        \"MULTI_ROOT\",\n        \"NONE\"\n       ],\n       \"type\": \"string\"\n      },\n      \"rotationVerificationMethod\": {\n       \"description\": \"Type of rotation verification to use when rotating root certificates.\",\n       \"oneOf\": [\n        {\n         \"not\": {\n          \"anyOf\": [\n           {\n            \"required\": [\n             \"none\"\n            ]\n           },\n           {\n            \"required\": [\n             \"manual\"\n            ]\n           }\n          ]\n         }\n        },\n        {\n         \"required\": [\n          \"none\"\n         ]\n        },\n        {\n         \"required\": [\n          \"manual\"\n         ]\n        }\n       ],\n       \"properties\": {\n        \"manual\": {\n         \"description\": \"Verification must be completed manually. This involves using our certificate verification\\nendpoint when the certificates are in a VERIFYING state\",\n         \"maxProperties\": 0,\n         \"type\": \"object\"\n        },\n        \"none\": {\n         \"description\": \"Verification not enabled. NOTE: This setting is only recommended for testing.\\nWhen enabled rotation will continue from step to step without any kind of verification.\",\n         \"maxProperties\": 0,\n         \"type\": \"object\"\n        }\n       },\n       \"type\": \"object\"\n      },\n      \"shared\": {\n       \"description\": \"Shared trust (allow communication between any pair of Workloads and Destinations in the grouped Meshes).\",\n       \"properties\": {\n        \"intermediateCertOptions\": {\n         \"description\": \"Configuration options for generated intermediate certs.\",\n         \"properties\": {\n          \"orgName\": {\n           \"description\": \"Root cert organization name. Defaults to \\\"gloo-mesh\\\".\",\n           \"type\": \"string\"\n          },\n          \"rsaKeySizeBytes\": {\n           \"description\": \"Size in bytes of the root cert's private key. Defaults to 4096.\",\n           \"maximum\": 4294967295,\n           \"minimum\": 0,\n           \"type\": \"integer\"\n          },\n          \"secretRotationGracePeriodRatio\": {\n           \"description\": \"The ratio of cert lifetime to refresh a cert. For example, at 0.10 and 1 hour TTL,\\nwe would refresh 6 minutes before expiration\",\n           \"format\": \"float\",\n           \"type\": \"number\"\n          },\n          \"ttlDays\": {\n           \"description\": \"Number of days before root cert expires. Defaults to 365.\",\n           \"maximum\": 4294967295,\n           \"minimum\": 0,\n           \"type\": \"integer\"\n          }\n         },\n         \"type\": \"object\"\n        },\n        \"intermediateCertificateAuthority\": {\n         \"description\": \"Configures an Intermediate Certificiate Authority which remote clusters will use to generate intermediate\\ncertificates. In order for this to properly mesh all of the traffic across the different meshes, the CA\\nbeing used must be configured to generate the intermediate certificates.\",\n         \"properties\": {\n          \"vault\": {\n           \"description\": \"Use vault as the intermediate CA source\",\n           \"properties\": {\n            \"caBundle\": {\n             \"description\": \"PEM encoded CA bundle used to validate Vault server certificate. Only used\\nif the Server URL is using HTTPS protocol. This parameter is ignored for\\nplain HTTP protocol connection. If not set the system root certificates\\nare used to validate the TLS connection.\",\n             \"format\": \"binary\",\n             \"type\": \"string\"\n            },\n            \"caPath\": {\n             \"description\": \"`ca_path` is the mount path of the Vault PKI backend's `sign` endpoint, e.g:\\n\\\"my_pki_mount/sign/my-role-name\\\".\",\n             \"type\": \"string\"\n            },\n            \"csrPath\": {\n             \"description\": \"`csr_path` is the mount path of the Vault PKI backend's `generate` endpoint, e.g:\\n\\\"my_pki_mount/intermediate/generate/exported\\\".\\n\\\"exported\\\" is necessary here as istio needs access to the private key\\nSee vault docs here: https://www.vaultproject.io/api-docs/secret/pki#parameters-4\",\n             \"type\": \"string\"\n            },\n            \"kubernetesAuth\": {\n             \"description\": \"Kubernetes authenticates with Vault by passing the ServiceAccount\\ntoken stored in the named Secret resource to the Vault server.\",\n             \"properties\": {\n              \"mountPath\": {\n               \"description\": \"The Vault mountPath here is the mount path to use when authenticating with\\nVault. For example, setting a value to `/v1/auth/foo`, will use the path\\n`/v1/auth/foo/login` to authenticate with Vault. If unspecified, the\\ndefault value \\\"/v1/auth/kubernetes\\\" will be used.\",\n               \"type\": \"string\"\n              },\n              \"mountedSaPath\": {\n               \"description\": \"File System path to grab the service account token from.\\nDefaults to /var/run/secrets/kubernetes.io/serviceaccount\",\n               \"type\": \"string\"\n              },\n              \"role\": {\n               \"description\": \"A required field containing the Vault Role to assume. A Role binds a\\nKubernetes ServiceAccount with a set of Vault policies.\",\n               \"type\": \"string\"\n              },\n              \"secretTokenKey\": {\n               \"description\": \"Key to search for the sa_token\\nDefault to \\\"token\\\"\",\n               \"type\": \"string\"\n              },\n              \"serviceAccountRef\": {\n               \"description\": \"Reference to service account, other than the one mounted to the current pod.\",\n               \"properties\": {\n                \"name\": {\n                 \"description\": \"name of the resource being referenced\",\n                 \"type\": \"string\"\n                },\n                \"namespace\": {\n                 \"description\": \"namespace of the resource being referenced\",\n                 \"type\": \"string\"\n                }\n               },\n               \"type\": \"object\"\n              }\n             },\n             \"type\": \"object\"\n            },\n            \"namespace\": {\n             \"description\": \"Name of the vault namespace. Namespaces is a set of features within Vault Enterprise that allows Vault environments to support Secure Multi-tenancy. e.g: \\\"ns1\\\"\\nMore about namespaces can be found [here](https://www.vaultproject.io/docs/enterprise/namespaces)\",\n             \"type\": \"string\"\n            },\n            \"server\": {\n             \"description\": \"Server is the connection address for the Vault server, e.g: \\\"https://vault.example.com:8200\\\".\",\n             \"type\": \"string\"\n            },\n            \"tokenSecretRef\": {\n             \"description\": \"TokenSecretRef authenticates with Vault by presenting a token.\",\n             \"properties\": {\n              \"name\": {\n               \"description\": \"name of the resource being referenced\",\n               \"type\": \"string\"\n              },\n              \"namespace\": {\n               \"description\": \"namespace of the resource being referenced\",\n               \"type\": \"string\"\n              }\n             },\n             \"type\": \"object\"\n            }\n           },\n           \"type\": \"object\"\n          }\n         },\n         \"type\": \"object\"\n        },\n        \"rootCertificateAuthority\": {\n         \"description\": \"Configure a Root Certificate Authority which will be shared by all Meshes associated with this VirtualMesh.\\nIf this is not provided, a self-signed certificate will be generated by Gloo Mesh.\",\n         \"properties\": {\n          \"generated\": {\n           \"description\": \"Generate a self-signed root certificate with the given options.\",\n           \"properties\": {\n            \"orgName\": {\n             \"description\": \"Root cert organization name. Defaults to \\\"gloo-mesh\\\".\",\n             \"type\": \"string\"\n            },\n            \"rsaKeySizeBytes\": {\n             \"description\": \"Size in bytes of the root cert's private key. Defaults to 4096.\",\n             \"maximum\": 4294967295,\n             \"minimum\": 0,\n             \"type\": \"integer\"\n            },\n            \"secretRotationGracePeriodRatio\": {\n             \"description\": \"The ratio of cert lifetime to refresh a cert. For example, at 0.10 and 1 hour TTL,\\nwe would refresh 6 minutes before expiration\",\n             \"format\": \"float\",\n             \"type\": \"number\"\n            },\n            \"ttlDays\": {\n             \"description\": \"Number of days before root cert expires. Defaults to 365.\",\n             \"maximum\": 4294967295,\n             \"minimum\": 0,\n             \"type\": \"integer\"\n            }\n           },\n           \"type\": \"object\"\n          },\n          \"secret\": {\n           \"description\": \"Reference to a Kubernetes Secret containing the root certificate authority.\\nProvided secrets must conform to a specified format, [documented here]({{\\u003c versioned_link_path fromRoot=\\\"/guides/federate_identity/\\\" \\u003e}}).\",\n           \"properties\": {\n            \"name\": {\n             \"description\": \"name of the resource being referenced\",\n             \"type\": \"string\"\n            },\n            \"namespace\": {\n             \"description\": \"namespace of the resource being referenced\",\n             \"type\": \"string\"\n            }\n           },\n           \"type\": \"object\"\n          }\n         },\n         \"type\": \"object\"\n        }\n       },\n       \"type\": \"object\"\n      }\n     },\n     \"type\": \"object\"\n    }\n   },\n   \"type\": \"object\"\n  }\n },\n \"title\": \"Virtual Mesh\",\n \"type\": \"object\"\n}"}