{"kind":"MeshHealthCheck","apiVersion":"v1alpha1","displayName":"Mesh Health Check","format":"JSON","metadata":{},"model":{"name":"kong-mesh","version":"2.0.1","modelDisplayName":"kong-mesh","category":"","subCategory":""},"schema":"{\n \"description\": \"Spec is the specification of the Kuma MeshHealthCheck resource.\",\n \"properties\": {\n  \"targetRef\": {\n   \"description\": \"TargetRef is a reference to the resource the policy takes an effect on. The resource could be either a real store object or virtual resource defined inplace.\",\n   \"properties\": {\n    \"kind\": {\n     \"description\": \"Kind of the referenced resource\",\n     \"enum\": [\n      \"Mesh\",\n      \"MeshSubset\",\n      \"MeshService\",\n      \"MeshServiceSubset\",\n      \"MeshGatewayRoute\"\n     ],\n     \"type\": \"string\"\n    },\n    \"mesh\": {\n     \"description\": \"Mesh is reserved for future use to identify cross mesh resources.\",\n     \"type\": \"string\"\n    },\n    \"name\": {\n     \"description\": \"Name of the referenced resource. Can only be used with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`\",\n     \"type\": \"string\"\n    },\n    \"tags\": {\n     \"additionalProperties\": {\n      \"type\": \"string\"\n     },\n     \"description\": \"Tags used to select a subset of proxies by tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`\",\n     \"type\": \"object\"\n    }\n   },\n   \"type\": \"object\"\n  },\n  \"to\": {\n   \"description\": \"To list makes a match between the consumed services and corresponding configurations\",\n   \"items\": {\n    \"properties\": {\n     \"default\": {\n      \"description\": \"Default is a configuration specific to the group of destinations referenced in 'targetRef'\",\n      \"properties\": {\n       \"alwaysLogHealthCheckFailures\": {\n        \"description\": \"If set to true, health check failure events will always be logged. If set to false, only the initial health check failure event will be logged. The default value is false.\",\n        \"type\": \"boolean\"\n       },\n       \"eventLogPath\": {\n        \"description\": \"Specifies the path to the file where Envoy can log health check events. If empty, no event log will be written.\",\n        \"type\": \"string\"\n       },\n       \"failTrafficOnPanic\": {\n        \"description\": \"If set to true, Envoy will not consider any hosts when the cluster is in 'panic mode'. Instead, the cluster will fail all requests as if all hosts are unhealthy. This can help avoid potentially overwhelming a failing service.\",\n        \"type\": \"boolean\"\n       },\n       \"grpc\": {\n        \"description\": \"GrpcHealthCheck defines gRPC configuration which will instruct the service the health check will be made for is a gRPC service.\",\n        \"properties\": {\n         \"authority\": {\n          \"description\": \"The value of the :authority header in the gRPC health check request, by default name of the cluster this health check is associated with\",\n          \"type\": \"string\"\n         },\n         \"disabled\": {\n          \"description\": \"If true the GrpcHealthCheck is disabled\",\n          \"type\": \"boolean\"\n         },\n         \"serviceName\": {\n          \"description\": \"Service name parameter which will be sent to gRPC service\",\n          \"type\": \"string\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"healthyPanicThreshold\": {\n        \"anyOf\": [\n         {\n          \"type\": \"integer\"\n         },\n         {\n          \"type\": \"string\"\n         }\n        ],\n        \"description\": \"Allows to configure panic threshold for Envoy cluster. If not specified, the default is 50%. To disable panic mode, set to 0%. Either int or decimal represented as string.\",\n        \"x-kubernetes-int-or-string\": true\n       },\n       \"healthyThreshold\": {\n        \"default\": 1,\n        \"description\": \"Number of consecutive healthy checks before considering a host healthy.\",\n        \"format\": \"int32\",\n        \"type\": \"integer\"\n       },\n       \"http\": {\n        \"description\": \"HttpHealthCheck defines HTTP configuration which will instruct the service the health check will be made for is an HTTP service.\",\n        \"properties\": {\n         \"disabled\": {\n          \"description\": \"If true the HttpHealthCheck is disabled\",\n          \"type\": \"boolean\"\n         },\n         \"expectedStatuses\": {\n          \"description\": \"List of HTTP response statuses which are considered healthy\",\n          \"items\": {\n           \"format\": \"int32\",\n           \"type\": \"integer\"\n          },\n          \"type\": \"array\"\n         },\n         \"path\": {\n          \"default\": \"/\",\n          \"description\": \"The HTTP path which will be requested during the health check (ie. /health)\",\n          \"type\": \"string\"\n         },\n         \"requestHeadersToAdd\": {\n          \"description\": \"The list of HTTP headers which should be added to each health check request\",\n          \"properties\": {\n           \"add\": {\n            \"items\": {\n             \"properties\": {\n              \"name\": {\n               \"maxLength\": 256,\n               \"minLength\": 1,\n               \"pattern\": \"^[a-z0-9!#$%\\u0026'*+\\\\-.^_\\\\x60|~]+$\",\n               \"type\": \"string\"\n              },\n              \"value\": {\n               \"type\": \"string\"\n              }\n             },\n             \"required\": [\n              \"name\",\n              \"value\"\n             ],\n             \"type\": \"object\"\n            },\n            \"maxItems\": 16,\n            \"type\": \"array\",\n            \"x-kubernetes-list-map-keys\": [\n             \"name\"\n            ],\n            \"x-kubernetes-list-type\": \"map\"\n           },\n           \"set\": {\n            \"items\": {\n             \"properties\": {\n              \"name\": {\n               \"maxLength\": 256,\n               \"minLength\": 1,\n               \"pattern\": \"^[a-z0-9!#$%\\u0026'*+\\\\-.^_\\\\x60|~]+$\",\n               \"type\": \"string\"\n              },\n              \"value\": {\n               \"type\": \"string\"\n              }\n             },\n             \"required\": [\n              \"name\",\n              \"value\"\n             ],\n             \"type\": \"object\"\n            },\n            \"maxItems\": 16,\n            \"type\": \"array\",\n            \"x-kubernetes-list-map-keys\": [\n             \"name\"\n            ],\n            \"x-kubernetes-list-type\": \"map\"\n           }\n          },\n          \"type\": \"object\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"initialJitter\": {\n        \"description\": \"If specified, Envoy will start health checking after a random time in ms between 0 and initialJitter. This only applies to the first health check.\",\n        \"type\": \"string\"\n       },\n       \"interval\": {\n        \"default\": \"1m\",\n        \"description\": \"Interval between consecutive health checks.\",\n        \"type\": \"string\"\n       },\n       \"intervalJitter\": {\n        \"description\": \"If specified, during every interval Envoy will add IntervalJitter to the wait time.\",\n        \"type\": \"string\"\n       },\n       \"intervalJitterPercent\": {\n        \"description\": \"If specified, during every interval Envoy will add IntervalJitter * IntervalJitterPercent / 100 to the wait time. If IntervalJitter and IntervalJitterPercent are both set, both of them will be used to increase the wait time.\",\n        \"format\": \"int32\",\n        \"type\": \"integer\"\n       },\n       \"noTrafficInterval\": {\n        \"description\": \"The \\\"no traffic interval\\\" is a special health check interval that is used when a cluster has never had traffic routed to it. This lower interval allows cluster information to be kept up to date, without sending a potentially large amount of active health checking traffic for no reason. Once a cluster has been used for traffic routing, Envoy will shift back to using the standard health check interval that is defined. Note that this interval takes precedence over any other. The default value for \\\"no traffic interval\\\" is 60 seconds.\",\n        \"type\": \"string\"\n       },\n       \"reuseConnection\": {\n        \"description\": \"Reuse health check connection between health checks. Default is true.\",\n        \"type\": \"boolean\"\n       },\n       \"tcp\": {\n        \"description\": \"TcpHealthCheck defines configuration for specifying bytes to send and expected response during the health check\",\n        \"properties\": {\n         \"disabled\": {\n          \"description\": \"If true the TcpHealthCheck is disabled\",\n          \"type\": \"boolean\"\n         },\n         \"receive\": {\n          \"description\": \"List of Base64 encoded blocks of strings expected as a response. When checking the response, \\\"fuzzy\\\" matching is performed such that each block must be found, and in the order specified, but not necessarily contiguous. If not provided or empty, checks will be performed as \\\"connect only\\\" and be marked as successful when TCP connection is successfully established.\",\n          \"items\": {\n           \"type\": \"string\"\n          },\n          \"type\": \"array\"\n         },\n         \"send\": {\n          \"description\": \"Base64 encoded content of the message which will be sent during the health check to the target\",\n          \"type\": \"string\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"timeout\": {\n        \"default\": \"15s\",\n        \"description\": \"Maximum time to wait for a health check response.\",\n        \"type\": \"string\"\n       },\n       \"unhealthyThreshold\": {\n        \"default\": 5,\n        \"description\": \"Number of consecutive unhealthy checks before considering a host unhealthy.\",\n        \"format\": \"int32\",\n        \"type\": \"integer\"\n       }\n      },\n      \"type\": \"object\"\n     },\n     \"targetRef\": {\n      \"description\": \"TargetRef is a reference to the resource that represents a group of destinations.\",\n      \"properties\": {\n       \"kind\": {\n        \"description\": \"Kind of the referenced resource\",\n        \"enum\": [\n         \"Mesh\",\n         \"MeshSubset\",\n         \"MeshService\",\n         \"MeshServiceSubset\",\n         \"MeshGatewayRoute\"\n        ],\n        \"type\": \"string\"\n       },\n       \"mesh\": {\n        \"description\": \"Mesh is reserved for future use to identify cross mesh resources.\",\n        \"type\": \"string\"\n       },\n       \"name\": {\n        \"description\": \"Name of the referenced resource. Can only be used with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`\",\n        \"type\": \"string\"\n       },\n       \"tags\": {\n        \"additionalProperties\": {\n         \"type\": \"string\"\n        },\n        \"description\": \"Tags used to select a subset of proxies by tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`\",\n        \"type\": \"object\"\n       }\n      },\n      \"type\": \"object\"\n     }\n    },\n    \"required\": [\n     \"targetRef\"\n    ],\n    \"type\": \"object\"\n   },\n   \"type\": \"array\"\n  }\n },\n \"required\": [\n  \"targetRef\"\n ],\n \"title\": \"Mesh Health Check\",\n \"type\": \"object\"\n}"}