{"kind":"MeshRetry","apiVersion":"v1alpha1","displayName":"Mesh Retry","format":"JSON","metadata":{},"model":{"name":"kong-mesh","version":"2.0.1","modelDisplayName":"kong-mesh","category":"","subCategory":""},"schema":"{\n \"description\": \"Spec is the specification of the Kuma MeshRetry resource.\",\n \"properties\": {\n  \"targetRef\": {\n   \"description\": \"TargetRef is a reference to the resource the policy takes an effect on. The resource could be either a real store object or virtual resource defined inplace.\",\n   \"properties\": {\n    \"kind\": {\n     \"description\": \"Kind of the referenced resource\",\n     \"enum\": [\n      \"Mesh\",\n      \"MeshSubset\",\n      \"MeshService\",\n      \"MeshServiceSubset\",\n      \"MeshGatewayRoute\"\n     ],\n     \"type\": \"string\"\n    },\n    \"mesh\": {\n     \"description\": \"Mesh is reserved for future use to identify cross mesh resources.\",\n     \"type\": \"string\"\n    },\n    \"name\": {\n     \"description\": \"Name of the referenced resource. Can only be used with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`\",\n     \"type\": \"string\"\n    },\n    \"tags\": {\n     \"additionalProperties\": {\n      \"type\": \"string\"\n     },\n     \"description\": \"Tags used to select a subset of proxies by tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`\",\n     \"type\": \"object\"\n    }\n   },\n   \"type\": \"object\"\n  },\n  \"to\": {\n   \"description\": \"To list makes a match between the consumed services and corresponding configurations\",\n   \"items\": {\n    \"properties\": {\n     \"default\": {\n      \"description\": \"Default is a configuration specific to the group of destinations referenced in 'targetRef'\",\n      \"properties\": {\n       \"grpc\": {\n        \"description\": \"GRPC defines a configuration of retries for GRPC traffic\",\n        \"properties\": {\n         \"backOff\": {\n          \"description\": \"BackOff is a configuration of durations which will be used in exponential backoff strategy between retries.\",\n          \"properties\": {\n           \"baseInterval\": {\n            \"description\": \"BaseInterval is an amount of time which should be taken between retries. Must be greater than zero. Values less than 1 ms are rounded up to 1 ms. Default is 25ms.\",\n            \"type\": \"string\"\n           },\n           \"maxInterval\": {\n            \"description\": \"MaxInterval is a maximal amount of time which will be taken between retries. Default is 10 times the \\\"BaseInterval\\\".\",\n            \"type\": \"string\"\n           }\n          },\n          \"type\": \"object\"\n         },\n         \"numRetries\": {\n          \"description\": \"NumRetries is the number of attempts that will be made on failed (and retriable) requests.\",\n          \"format\": \"int32\",\n          \"type\": \"integer\"\n         },\n         \"perTryTimeout\": {\n          \"description\": \"PerTryTimeout is the amount of time after which retry attempt should timeout. Setting this timeout to 0 will disable it. Default is 15s.\",\n          \"type\": \"string\"\n         },\n         \"rateLimitedBackOff\": {\n          \"description\": \"RateLimitedBackOff is a configuration of backoff which will be used when the upstream returns one of the headers configured.\",\n          \"properties\": {\n           \"maxInterval\": {\n            \"description\": \"MaxInterval is a maximal amount of time which will be taken between retries. Default is 300 seconds.\",\n            \"type\": \"string\"\n           },\n           \"resetHeaders\": {\n            \"description\": \"ResetHeaders specifies the list of headers (like Retry-After or X-RateLimit-Reset) to match against the response. Headers are tried in order, and matched case-insensitive. The first header to be parsed successfully is used. If no headers match the default exponential BackOff is used instead.\",\n            \"items\": {\n             \"properties\": {\n              \"format\": {\n               \"description\": \"The format of the reset header, either Seconds or UnixTimestamp.\",\n               \"enum\": [\n                \"Seconds\",\n                \"UnixTimestamp\"\n               ],\n               \"type\": \"string\"\n              },\n              \"name\": {\n               \"description\": \"The Name of the reset header.\",\n               \"maxLength\": 256,\n               \"minLength\": 1,\n               \"pattern\": \"^[a-z0-9!#$%\\u0026'*+\\\\-.^_\\\\x60|~]+$\",\n               \"type\": \"string\"\n              }\n             },\n             \"required\": [\n              \"format\",\n              \"name\"\n             ],\n             \"type\": \"object\"\n            },\n            \"type\": \"array\"\n           }\n          },\n          \"type\": \"object\"\n         },\n         \"retryOn\": {\n          \"description\": \"RetryOn is a list of conditions which will cause a retry. Available values are: [Canceled, DeadlineExceeded, Internal, ResourceExhausted, Unavailable].\",\n          \"items\": {\n           \"type\": \"string\"\n          },\n          \"type\": \"array\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"http\": {\n        \"description\": \"HTTP defines a configuration of retries for HTTP traffic\",\n        \"properties\": {\n         \"backOff\": {\n          \"description\": \"BackOff is a configuration of durations which will be used in exponential backoff strategy between retries\",\n          \"properties\": {\n           \"baseInterval\": {\n            \"description\": \"BaseInterval is an amount of time which should be taken between retries. Must be greater than zero. Values less than 1 ms are rounded up to 1 ms. Default is 25ms.\",\n            \"type\": \"string\"\n           },\n           \"maxInterval\": {\n            \"description\": \"MaxInterval is a maximal amount of time which will be taken between retries. Default is 10 times the \\\"BaseInterval\\\".\",\n            \"type\": \"string\"\n           }\n          },\n          \"type\": \"object\"\n         },\n         \"numRetries\": {\n          \"description\": \"NumRetries is the number of attempts that will be made on failed (and retriable) requests\",\n          \"format\": \"int32\",\n          \"type\": \"integer\"\n         },\n         \"perTryTimeout\": {\n          \"description\": \"PerTryTimeout is the amount of time after which retry attempt should timeout. Setting this timeout to 0 will disable it. Default is 15s.\",\n          \"type\": \"string\"\n         },\n         \"rateLimitedBackOff\": {\n          \"description\": \"RateLimitedBackOff is a configuration of backoff which will be used when the upstream returns one of the headers configured.\",\n          \"properties\": {\n           \"maxInterval\": {\n            \"description\": \"MaxInterval is a maximal amount of time which will be taken between retries. Default is 300 seconds.\",\n            \"type\": \"string\"\n           },\n           \"resetHeaders\": {\n            \"description\": \"ResetHeaders specifies the list of headers (like Retry-After or X-RateLimit-Reset) to match against the response. Headers are tried in order, and matched case-insensitive. The first header to be parsed successfully is used. If no headers match the default exponential BackOff is used instead.\",\n            \"items\": {\n             \"properties\": {\n              \"format\": {\n               \"description\": \"The format of the reset header, either Seconds or UnixTimestamp.\",\n               \"enum\": [\n                \"Seconds\",\n                \"UnixTimestamp\"\n               ],\n               \"type\": \"string\"\n              },\n              \"name\": {\n               \"description\": \"The Name of the reset header.\",\n               \"maxLength\": 256,\n               \"minLength\": 1,\n               \"pattern\": \"^[a-z0-9!#$%\\u0026'*+\\\\-.^_\\\\x60|~]+$\",\n               \"type\": \"string\"\n              }\n             },\n             \"required\": [\n              \"format\",\n              \"name\"\n             ],\n             \"type\": \"object\"\n            },\n            \"type\": \"array\"\n           }\n          },\n          \"type\": \"object\"\n         },\n         \"retriableRequestHeaders\": {\n          \"description\": \"RetriableRequestHeaders is an HTTP headers which must be present in the request for retries to be attempted.\",\n          \"items\": {\n           \"description\": \"HTTPHeaderMatch describes how to select a HTTP route by matching HTTP request headers.\",\n           \"properties\": {\n            \"name\": {\n             \"description\": \"Name is the name of the HTTP Header to be matched. Name MUST be lower case as they will be handled with case insensitivity (See https://tools.ietf.org/html/rfc7230#section-3.2).\",\n             \"maxLength\": 256,\n             \"minLength\": 1,\n             \"pattern\": \"^[a-z0-9!#$%\\u0026'*+\\\\-.^_\\\\x60|~]+$\",\n             \"type\": \"string\"\n            },\n            \"type\": {\n             \"default\": \"Exact\",\n             \"description\": \"Type specifies how to match against the value of the header.\",\n             \"enum\": [\n              \"Exact\",\n              \"Present\",\n              \"RegularExpression\",\n              \"Absent\",\n              \"Prefix\"\n             ],\n             \"type\": \"string\"\n            },\n            \"value\": {\n             \"description\": \"Value is the value of HTTP Header to be matched.\",\n             \"type\": \"string\"\n            }\n           },\n           \"required\": [\n            \"name\",\n            \"value\"\n           ],\n           \"type\": \"object\"\n          },\n          \"type\": \"array\"\n         },\n         \"retriableResponseHeaders\": {\n          \"description\": \"RetriableResponseHeaders is an HTTP response headers that trigger a retry if present in the response. A retry will be triggered if any of the header matches match the upstream response headers.\",\n          \"items\": {\n           \"description\": \"HTTPHeaderMatch describes how to select a HTTP route by matching HTTP request headers.\",\n           \"properties\": {\n            \"name\": {\n             \"description\": \"Name is the name of the HTTP Header to be matched. Name MUST be lower case as they will be handled with case insensitivity (See https://tools.ietf.org/html/rfc7230#section-3.2).\",\n             \"maxLength\": 256,\n             \"minLength\": 1,\n             \"pattern\": \"^[a-z0-9!#$%\\u0026'*+\\\\-.^_\\\\x60|~]+$\",\n             \"type\": \"string\"\n            },\n            \"type\": {\n             \"default\": \"Exact\",\n             \"description\": \"Type specifies how to match against the value of the header.\",\n             \"enum\": [\n              \"Exact\",\n              \"Present\",\n              \"RegularExpression\",\n              \"Absent\",\n              \"Prefix\"\n             ],\n             \"type\": \"string\"\n            },\n            \"value\": {\n             \"description\": \"Value is the value of HTTP Header to be matched.\",\n             \"type\": \"string\"\n            }\n           },\n           \"required\": [\n            \"name\",\n            \"value\"\n           ],\n           \"type\": \"object\"\n          },\n          \"type\": \"array\"\n         },\n         \"retryOn\": {\n          \"description\": \"RetryOn is a list of conditions which will cause a retry. Available values are: [5XX, GatewayError, Reset, Retriable4xx, ConnectFailure, EnvoyRatelimited, RefusedStream, Http3PostConnectFailure, HttpMethodConnect, HttpMethodDelete, HttpMethodGet, HttpMethodHead, HttpMethodOptions, HttpMethodPatch, HttpMethodPost, HttpMethodPut, HttpMethodTrace]. Also, any HTTP status code (500, 503, etc).\",\n          \"items\": {\n           \"type\": \"string\"\n          },\n          \"type\": \"array\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"tcp\": {\n        \"description\": \"TCP defines a configuration of retries for TCP traffic\",\n        \"properties\": {\n         \"maxConnectAttempt\": {\n          \"description\": \"MaxConnectAttempt is a maximal amount of TCP connection attempts which will be made before giving up\",\n          \"format\": \"int32\",\n          \"type\": \"integer\"\n         }\n        },\n        \"type\": \"object\"\n       }\n      },\n      \"type\": \"object\"\n     },\n     \"targetRef\": {\n      \"description\": \"TargetRef is a reference to the resource that represents a group of destinations.\",\n      \"properties\": {\n       \"kind\": {\n        \"description\": \"Kind of the referenced resource\",\n        \"enum\": [\n         \"Mesh\",\n         \"MeshSubset\",\n         \"MeshService\",\n         \"MeshServiceSubset\",\n         \"MeshGatewayRoute\"\n        ],\n        \"type\": \"string\"\n       },\n       \"mesh\": {\n        \"description\": \"Mesh is reserved for future use to identify cross mesh resources.\",\n        \"type\": \"string\"\n       },\n       \"name\": {\n        \"description\": \"Name of the referenced resource. Can only be used with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`\",\n        \"type\": \"string\"\n       },\n       \"tags\": {\n        \"additionalProperties\": {\n         \"type\": \"string\"\n        },\n        \"description\": \"Tags used to select a subset of proxies by tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`\",\n        \"type\": \"object\"\n       }\n      },\n      \"type\": \"object\"\n     }\n    },\n    \"required\": [\n     \"targetRef\"\n    ],\n    \"type\": \"object\"\n   },\n   \"type\": \"array\"\n  }\n },\n \"required\": [\n  \"targetRef\"\n ],\n \"title\": \"Mesh Retry\",\n \"type\": \"object\"\n}"}