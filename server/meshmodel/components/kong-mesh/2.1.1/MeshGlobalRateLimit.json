{"kind":"MeshGlobalRateLimit","apiVersion":"kuma.io/v1alpha1","displayName":"Mesh Global Rate Limit","format":"JSON","metadata":{},"model":{"name":"kong-mesh","version":"2.1.1","displayName":"kong-mesh","category":{"name":"","metadata":null},"metadata":null},"schema":"{\n \"description\": \"Spec is the specification of the Kuma MeshGlobalRateLimit resource.\",\n \"properties\": {\n  \"from\": {\n   \"description\": \"From list makes a match between clients and corresponding configurations\",\n   \"items\": {\n    \"properties\": {\n     \"default\": {\n      \"description\": \"Default is a configuration specific to the group of clients referenced in 'targetRef'\",\n      \"properties\": {\n       \"backend\": {\n        \"description\": \"Backend defines location of rate limit backend service.\",\n        \"properties\": {\n         \"rateLimitService\": {\n          \"properties\": {\n           \"limitOnServiceFail\": {\n            \"description\": \"LimitOnServiceFail will pass limit requests if ratelimit service is not reachable.\",\n            \"type\": \"boolean\"\n           },\n           \"timeout\": {\n            \"description\": \"Timeout for rate limit request made form Data Plane Proxy to rate limit service.\",\n            \"type\": \"string\"\n           },\n           \"url\": {\n            \"description\": \"Url defines address of rate limit service.\",\n            \"type\": \"string\"\n           }\n          },\n          \"required\": [\n           \"timeout\",\n           \"url\"\n          ],\n          \"type\": \"object\"\n         }\n        },\n        \"required\": [\n         \"rateLimitService\"\n        ],\n        \"type\": \"object\"\n       },\n       \"http\": {\n        \"properties\": {\n         \"disabled\": {\n          \"description\": \"Define if rate limiting should be disabled.\",\n          \"type\": \"boolean\"\n         },\n         \"onRateLimit\": {\n          \"description\": \"Describes the actions to take on a rate limit event\",\n          \"properties\": {\n           \"headers\": {\n            \"description\": \"The Headers to be added to the HTTP response on a rate limit event\",\n            \"properties\": {\n             \"add\": {\n              \"items\": {\n               \"properties\": {\n                \"name\": {\n                 \"maxLength\": 256,\n                 \"minLength\": 1,\n                 \"pattern\": \"^[a-z0-9!#$%\\u0026'*+\\\\-.^_\\\\x60|~]+$\",\n                 \"type\": \"string\"\n                },\n                \"value\": {\n                 \"type\": \"string\"\n                }\n               },\n               \"required\": [\n                \"name\",\n                \"value\"\n               ],\n               \"type\": \"object\"\n              },\n              \"maxItems\": 16,\n              \"type\": \"array\",\n              \"x-kubernetes-list-map-keys\": [\n               \"name\"\n              ],\n              \"x-kubernetes-list-type\": \"map\"\n             },\n             \"set\": {\n              \"items\": {\n               \"properties\": {\n                \"name\": {\n                 \"maxLength\": 256,\n                 \"minLength\": 1,\n                 \"pattern\": \"^[a-z0-9!#$%\\u0026'*+\\\\-.^_\\\\x60|~]+$\",\n                 \"type\": \"string\"\n                },\n                \"value\": {\n                 \"type\": \"string\"\n                }\n               },\n               \"required\": [\n                \"name\",\n                \"value\"\n               ],\n               \"type\": \"object\"\n              },\n              \"maxItems\": 16,\n              \"type\": \"array\",\n              \"x-kubernetes-list-map-keys\": [\n               \"name\"\n              ],\n              \"x-kubernetes-list-type\": \"map\"\n             }\n            },\n            \"type\": \"object\"\n           },\n           \"status\": {\n            \"description\": \"The HTTP status code to be set on a rate limit event\",\n            \"format\": \"int32\",\n            \"type\": \"integer\"\n           }\n          },\n          \"type\": \"object\"\n         },\n         \"ratelimitOnRequest\": {\n          \"description\": \"Defines rate limit based on request content\",\n          \"items\": {\n           \"properties\": {\n            \"kind\": {\n             \"description\": \"Kind defines type of rate limit config. Possible options: OnHeader.\",\n             \"enum\": [\n              \"OnHeader\"\n             ],\n             \"type\": \"string\"\n            },\n            \"limits\": {\n             \"description\": \"Limits defines limit configuration.\",\n             \"items\": {\n              \"properties\": {\n               \"requestRate\": {\n                \"description\": \"Defines how many requests are allowed per interval.\",\n                \"properties\": {\n                 \"interval\": {\n                  \"description\": \"The interval the number of units is accounted for. Only 1s, 1m, 1h or 24h can be configured.\",\n                  \"type\": \"string\"\n                 },\n                 \"num\": {\n                  \"description\": \"Number of units per interval (depending on usage it can be a number of requests, or a number of connections).\",\n                  \"format\": \"int32\",\n                  \"type\": \"integer\"\n                 }\n                },\n                \"required\": [\n                 \"interval\",\n                 \"num\"\n                ],\n                \"type\": \"object\"\n               },\n               \"value\": {\n                \"description\": \"Value of the request element on which rate limit should apply. E.g. header value.\",\n                \"type\": \"string\"\n               }\n              },\n              \"required\": [\n               \"requestRate\",\n               \"value\"\n              ],\n              \"type\": \"object\"\n             },\n             \"type\": \"array\"\n            },\n            \"name\": {\n             \"description\": \"Name of the request element on which rate limit should apply. E.g. header name.\",\n             \"type\": \"string\"\n            }\n           },\n           \"required\": [\n            \"kind\",\n            \"limits\",\n            \"name\"\n           ],\n           \"type\": \"object\"\n          },\n          \"type\": \"array\"\n         },\n         \"requestRate\": {\n          \"description\": \"Defines how many requests are allowed per interval.\",\n          \"properties\": {\n           \"interval\": {\n            \"description\": \"The interval the number of units is accounted for. Only 1s, 1m, 1h or 24h can be configured.\",\n            \"type\": \"string\"\n           },\n           \"num\": {\n            \"description\": \"Number of units per interval (depending on usage it can be a number of requests, or a number of connections).\",\n            \"format\": \"int32\",\n            \"type\": \"integer\"\n           }\n          },\n          \"required\": [\n           \"interval\",\n           \"num\"\n          ],\n          \"type\": \"object\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"mode\": {\n        \"description\": \"Mode defines rate limit behavior when limits are reached. Possible options: Limit and Shadow. Setting Shadow will not block over the limit requests but will update metrics. This is useful for testing rate limit configuration.\",\n        \"enum\": [\n         \"Limit\",\n         \"Shadow\"\n        ],\n        \"type\": \"string\"\n       }\n      },\n      \"required\": [\n       \"backend\",\n       \"http\"\n      ],\n      \"type\": \"object\"\n     },\n     \"targetRef\": {\n      \"description\": \"TargetRef is a reference to the resource that represents a group of clients.\",\n      \"properties\": {\n       \"kind\": {\n        \"description\": \"Kind of the referenced resource\",\n        \"enum\": [\n         \"Mesh\",\n         \"MeshSubset\",\n         \"MeshService\",\n         \"MeshServiceSubset\",\n         \"MeshHTTPRoute\"\n        ],\n        \"type\": \"string\"\n       },\n       \"mesh\": {\n        \"description\": \"Mesh is reserved for future use to identify cross mesh resources.\",\n        \"type\": \"string\"\n       },\n       \"name\": {\n        \"description\": \"Name of the referenced resource. Can only be used with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`\",\n        \"type\": \"string\"\n       },\n       \"tags\": {\n        \"additionalProperties\": {\n         \"type\": \"string\"\n        },\n        \"description\": \"Tags used to select a subset of proxies by tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`\",\n        \"type\": \"object\"\n       }\n      },\n      \"type\": \"object\"\n     }\n    },\n    \"required\": [\n     \"targetRef\"\n    ],\n    \"type\": \"object\"\n   },\n   \"type\": \"array\"\n  },\n  \"targetRef\": {\n   \"description\": \"TargetRef is a reference to the resource the policy takes an effect on. The resource could be either a real store object or virtual resource defined inplace.\",\n   \"properties\": {\n    \"kind\": {\n     \"description\": \"Kind of the referenced resource\",\n     \"enum\": [\n      \"Mesh\",\n      \"MeshSubset\",\n      \"MeshService\",\n      \"MeshServiceSubset\",\n      \"MeshHTTPRoute\"\n     ],\n     \"type\": \"string\"\n    },\n    \"mesh\": {\n     \"description\": \"Mesh is reserved for future use to identify cross mesh resources.\",\n     \"type\": \"string\"\n    },\n    \"name\": {\n     \"description\": \"Name of the referenced resource. Can only be used with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`\",\n     \"type\": \"string\"\n    },\n    \"tags\": {\n     \"additionalProperties\": {\n      \"type\": \"string\"\n     },\n     \"description\": \"Tags used to select a subset of proxies by tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`\",\n     \"type\": \"object\"\n    }\n   },\n   \"type\": \"object\"\n  }\n },\n \"required\": [\n  \"targetRef\"\n ],\n \"title\": \"Mesh Global Rate Limit\",\n \"type\": \"object\"\n}"}