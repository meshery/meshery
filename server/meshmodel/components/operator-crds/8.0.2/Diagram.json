{"kind":"Diagram","apiVersion":"v2","display-name":"Diagram","format":"JSON","metadata":{},"model":{"name":"operator-crds","version":"8.0.2","display-name":"operator-crds","category":"","sub-category":""},"schema":"{\n \"description\": \"DiagramSpec defines the desired state of Diagram\",\n \"properties\": {\n  \"context\": {\n   \"additionalProperties\": {\n    \"type\": \"string\"\n   },\n   \"description\": \"reference a configmap as context to resolve templating attributes use-case: plan schedule a workflow and needs to pass resolved templating fields to workflow\",\n   \"type\": \"object\"\n  },\n  \"layers\": {\n   \"description\": \"A list layers where each of them contains a set of nodes to be triggered simultaneously\",\n   \"items\": {\n    \"description\": \"A list of nodes to be executed simultaneously\",\n    \"properties\": {\n     \"inputRefs\": {\n      \"description\": \"Specify a list of input this node is expecting\",\n      \"items\": {\n       \"description\": \"Reference a Parameter type as node inputs or outputs\",\n       \"properties\": {\n        \"kind\": {\n         \"description\": \"the kind of the parameter type\",\n         \"type\": \"string\"\n        },\n        \"name\": {\n         \"description\": \"the name of the parameter type\",\n         \"type\": \"string\"\n        },\n        \"node\": {\n         \"description\": \"if input this is required if output this is optional\",\n         \"type\": \"string\"\n        }\n       },\n       \"required\": [\n        \"kind\",\n        \"name\"\n       ],\n       \"type\": \"object\"\n      },\n      \"type\": \"array\"\n     },\n     \"layerId\": {\n      \"description\": \"Number that goes from 1 to max allowed number Node that shares the same layer number will be executed at the sametime\",\n      \"type\": \"integer\"\n     },\n     \"modelRef\": {\n      \"description\": \"Specify which model we are going to use for this node\",\n      \"properties\": {\n       \"kind\": {\n        \"description\": \"The actual kind of the model\",\n        \"enum\": [\n         \"BatchApplicationModel\",\n         \"BatchPunchlineModel\",\n         \"SparkPunchlineModel\"\n        ],\n        \"type\": \"string\"\n       },\n       \"name\": {\n        \"description\": \"Name of the model to fetch\",\n        \"type\": \"string\"\n       }\n      },\n      \"required\": [\n       \"kind\",\n       \"name\"\n      ],\n      \"type\": \"object\"\n     },\n     \"node\": {\n      \"description\": \"The node name (must be unique to the workflow)\",\n      \"type\": \"string\"\n     },\n     \"outputRefs\": {\n      \"description\": \"Specify a list of output this node is going to publish\",\n      \"items\": {\n       \"description\": \"Reference a Parameter type as node inputs or outputs\",\n       \"properties\": {\n        \"kind\": {\n         \"description\": \"the kind of the parameter type\",\n         \"type\": \"string\"\n        },\n        \"name\": {\n         \"description\": \"the name of the parameter type\",\n         \"type\": \"string\"\n        },\n        \"node\": {\n         \"description\": \"if input this is required if output this is optional\",\n         \"type\": \"string\"\n        }\n       },\n       \"required\": [\n        \"kind\",\n        \"name\"\n       ],\n       \"type\": \"object\"\n      },\n      \"type\": \"array\"\n     }\n    },\n    \"required\": [\n     \"layerId\",\n     \"modelRef\",\n     \"node\"\n    ],\n    \"type\": \"object\"\n   },\n   \"type\": \"array\"\n  },\n  \"queueRef\": {\n   \"description\": \"this property is used to control hard resource allocation to workflow it offers more fine-grain execution sequence\",\n   \"properties\": {\n    \"kind\": {\n     \"type\": \"string\"\n    },\n    \"name\": {\n     \"type\": \"string\"\n    },\n    \"priority\": {\n     \"default\": 0,\n     \"description\": \"set a priority number the higher the number the higher will be the priority\",\n     \"type\": \"integer\"\n    }\n   },\n   \"required\": [\n    \"kind\",\n    \"name\"\n   ],\n   \"type\": \"object\"\n  },\n  \"ttlSecondsAfterFinished\": {\n   \"default\": 180,\n   \"description\": \"See kubernetes official doc on Job BackoffLimit\",\n   \"format\": \"int32\",\n   \"type\": \"integer\"\n  },\n  \"workflow\": {\n   \"description\": \"logical steps of the diagram\",\n   \"properties\": {\n    \"begin\": {\n     \"description\": \"Start the diagram from a given layerId\",\n     \"type\": \"integer\"\n    },\n    \"steps\": {\n     \"description\": \"Specify the diagram workflow\",\n     \"items\": {\n      \"description\": \"ordering of execution\",\n      \"properties\": {\n       \"else\": {\n        \"description\": \"Trigger a change in the workflow when conditions matches\",\n        \"properties\": {\n         \"layerId\": {\n          \"description\": \"Resume to a specified layerId\",\n          \"type\": \"integer\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"if\": {\n        \"description\": \"Evaluate conditions\",\n        \"properties\": {\n         \"conditions\": {\n          \"description\": \"Specify condition where each of them should evaluate to true to execute this node\",\n          \"items\": {\n           \"description\": \"Condition used in when/expect field\",\n           \"properties\": {\n            \"nodes\": {\n             \"description\": \"Node name from a given layer\",\n             \"items\": {\n              \"description\": \"Used by diagram\",\n              \"type\": \"string\"\n             },\n             \"type\": \"array\"\n            },\n            \"operator\": {\n             \"default\": \"and\",\n             \"description\": \"For a given node, evaluate status list condition based on operator\",\n             \"enum\": [\n              \"or\",\n              \"and\"\n             ],\n             \"type\": \"string\"\n            }\n           },\n           \"required\": [\n            \"nodes\"\n           ],\n           \"type\": \"object\"\n          },\n          \"type\": \"array\"\n         },\n         \"operator\": {\n          \"default\": \"and\",\n          \"description\": \"Operator to aggregate status\",\n          \"type\": \"string\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"layerId\": {\n        \"description\": \"Workflow reference of a layer\",\n        \"type\": \"integer\"\n       },\n       \"then\": {\n        \"description\": \"Trigger a change in the workflow when conditions matches\",\n        \"properties\": {\n         \"layerId\": {\n          \"description\": \"Resume to a specified layerId If not set, proceed to the nextLayer (currentLayer + 1)\",\n          \"type\": \"integer\"\n         }\n        },\n        \"type\": \"object\"\n       }\n      },\n      \"required\": [\n       \"layerId\"\n      ],\n      \"type\": \"object\"\n     },\n     \"type\": \"array\"\n    }\n   },\n   \"required\": [\n    \"begin\"\n   ],\n   \"type\": \"object\"\n  }\n },\n \"required\": [\n  \"layers\"\n ],\n \"title\": \"Diagram\",\n \"type\": \"object\"\n}"}