{"kind":"Canary","apiVersion":"v1beta1","display-name":"Canary","format":"JSON","metadata":{},"model":{"name":"flagger","version":"1.25.0","display-name":"","category":"","sub-category":""},"schema":"{\n \"description\": \"CanarySpec defines the desired state of a Canary.\",\n \"properties\": {\n  \"analysis\": {\n   \"description\": \"Canary analysis for this canary\",\n   \"oneOf\": [\n    {\n     \"required\": [\n      \"interval\",\n      \"threshold\",\n      \"iterations\"\n     ]\n    },\n    {\n     \"required\": [\n      \"interval\",\n      \"threshold\",\n      \"stepWeight\"\n     ]\n    },\n    {\n     \"required\": [\n      \"interval\",\n      \"threshold\",\n      \"stepWeights\"\n     ]\n    }\n   ],\n   \"properties\": {\n    \"alerts\": {\n     \"description\": \"Alert list for this canary analysis\",\n     \"items\": {\n      \"properties\": {\n       \"name\": {\n        \"description\": \"Name of the this alert\",\n        \"type\": \"string\"\n       },\n       \"providerRef\": {\n        \"description\": \"Alert provider reference\",\n        \"properties\": {\n         \"name\": {\n          \"description\": \"Name of the alert provider\",\n          \"type\": \"string\"\n         },\n         \"namespace\": {\n          \"description\": \"Namespace of the alert provider\",\n          \"type\": \"string\"\n         }\n        },\n        \"required\": [\n         \"name\"\n        ],\n        \"type\": \"object\"\n       },\n       \"severity\": {\n        \"description\": \"Severity level can be info, warn, error (default info)\",\n        \"enum\": [\n         \"\",\n         \"info\",\n         \"warn\",\n         \"error\"\n        ],\n        \"type\": \"string\"\n       }\n      },\n      \"required\": [\n       \"providerRef\",\n       \"name\"\n      ],\n      \"type\": \"object\"\n     },\n     \"type\": \"array\"\n    },\n    \"canaryReadyThreshold\": {\n     \"description\": \"Percentage of pods that need to be available to consider canary as ready\",\n     \"type\": \"number\"\n    },\n    \"interval\": {\n     \"description\": \"Schedule interval for this canary\",\n     \"pattern\": \"^[0-9]+(m|s)\",\n     \"type\": \"string\"\n    },\n    \"iterations\": {\n     \"description\": \"Number of checks to run for A/B Testing and Blue/Green\",\n     \"type\": \"number\"\n    },\n    \"match\": {\n     \"description\": \"A/B testing match conditions\",\n     \"items\": {\n      \"properties\": {\n       \"headers\": {\n        \"additionalProperties\": {\n         \"oneOf\": [\n          {\n           \"required\": [\n            \"exact\"\n           ]\n          },\n          {\n           \"required\": [\n            \"prefix\"\n           ]\n          },\n          {\n           \"required\": [\n            \"suffix\"\n           ]\n          },\n          {\n           \"required\": [\n            \"regex\"\n           ]\n          }\n         ],\n         \"properties\": {\n          \"exact\": {\n           \"format\": \"string\",\n           \"type\": \"string\"\n          },\n          \"prefix\": {\n           \"format\": \"string\",\n           \"type\": \"string\"\n          },\n          \"regex\": {\n           \"description\": \"RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax)\",\n           \"format\": \"string\",\n           \"type\": \"string\"\n          },\n          \"suffix\": {\n           \"format\": \"string\",\n           \"type\": \"string\"\n          }\n         },\n         \"type\": \"object\"\n        },\n        \"type\": \"object\"\n       },\n       \"sourceLabels\": {\n        \"additionalProperties\": {\n         \"format\": \"string\",\n         \"type\": \"string\"\n        },\n        \"description\": \"Applicable only when the 'mesh' gateway is included in the service.gateways list\",\n        \"type\": \"object\"\n       }\n      },\n      \"type\": \"object\"\n     },\n     \"type\": \"array\"\n    },\n    \"maxWeight\": {\n     \"description\": \"Max traffic weight routed to canary\",\n     \"type\": \"number\"\n    },\n    \"metrics\": {\n     \"description\": \"Metric check list for this canary\",\n     \"items\": {\n      \"properties\": {\n       \"interval\": {\n        \"description\": \"Interval of the query\",\n        \"pattern\": \"^[0-9]+(m|s)\",\n        \"type\": \"string\"\n       },\n       \"name\": {\n        \"description\": \"Name of the metric\",\n        \"type\": \"string\"\n       },\n       \"query\": {\n        \"description\": \"Prometheus query\",\n        \"type\": \"string\"\n       },\n       \"templateRef\": {\n        \"description\": \"Metric template reference\",\n        \"properties\": {\n         \"name\": {\n          \"description\": \"Name of this metric template\",\n          \"type\": \"string\"\n         },\n         \"namespace\": {\n          \"description\": \"Namespace of this metric template\",\n          \"type\": \"string\"\n         }\n        },\n        \"required\": [\n         \"name\"\n        ],\n        \"type\": \"object\"\n       },\n       \"threshold\": {\n        \"description\": \"Max value accepted for this metric\",\n        \"type\": \"number\"\n       },\n       \"thresholdRange\": {\n        \"description\": \"Range accepted for this metric\",\n        \"properties\": {\n         \"max\": {\n          \"description\": \"Max value accepted for this metric\",\n          \"type\": \"number\"\n         },\n         \"min\": {\n          \"description\": \"Min value accepted for this metric\",\n          \"type\": \"number\"\n         }\n        },\n        \"type\": \"object\"\n       }\n      },\n      \"required\": [\n       \"name\"\n      ],\n      \"type\": \"object\"\n     },\n     \"type\": \"array\"\n    },\n    \"mirror\": {\n     \"description\": \"Mirror traffic to canary\",\n     \"type\": \"boolean\"\n    },\n    \"mirrorWeight\": {\n     \"description\": \"Weight of traffic to be mirrored\",\n     \"type\": \"number\"\n    },\n    \"primaryReadyThreshold\": {\n     \"description\": \"Percentage of pods that need to be available to consider primary as ready\",\n     \"type\": \"number\"\n    },\n    \"sessionAffinity\": {\n     \"description\": \"SessionAffinity represents the session affinity settings for a canary run.\",\n     \"properties\": {\n      \"cookieName\": {\n       \"description\": \"CookieName is the key that will be used for the session affinity cookie.\",\n       \"type\": \"string\"\n      },\n      \"maxAge\": {\n       \"default\": 86400,\n       \"description\": \"MaxAge indicates the number of seconds until the session affinity cookie will expire.\",\n       \"type\": \"number\"\n      }\n     },\n     \"required\": [\n      \"cookieName\"\n     ],\n     \"type\": \"object\"\n    },\n    \"stepWeight\": {\n     \"description\": \"Incremental traffic step weight for the analysis phase\",\n     \"type\": \"number\"\n    },\n    \"stepWeightPromotion\": {\n     \"description\": \"Incremental traffic step weight for the promotion phase\",\n     \"type\": \"number\"\n    },\n    \"stepWeights\": {\n     \"description\": \"Incremental traffic step weights for the analysis phase\",\n     \"items\": {\n      \"type\": \"number\"\n     },\n     \"type\": \"array\"\n    },\n    \"threshold\": {\n     \"description\": \"Max number of failed checks before rollback\",\n     \"type\": \"number\"\n    },\n    \"webhooks\": {\n     \"description\": \"Webhook list for this canary\",\n     \"items\": {\n      \"properties\": {\n       \"metadata\": {\n        \"additionalProperties\": {\n         \"type\": \"string\"\n        },\n        \"description\": \"Metadata (key-value pairs) for this webhook\",\n        \"type\": \"object\"\n       },\n       \"muteAlert\": {\n        \"description\": \"Mute all alerts for the webhook\",\n        \"type\": \"boolean\"\n       },\n       \"name\": {\n        \"description\": \"Name of the webhook\",\n        \"type\": \"string\"\n       },\n       \"timeout\": {\n        \"description\": \"Request timeout for this webhook\",\n        \"pattern\": \"^[0-9]+(m|s)\",\n        \"type\": \"string\"\n       },\n       \"type\": {\n        \"description\": \"Type of the webhook pre, post or during rollout\",\n        \"enum\": [\n         \"\",\n         \"confirm-rollout\",\n         \"pre-rollout\",\n         \"rollout\",\n         \"confirm-promotion\",\n         \"post-rollout\",\n         \"event\",\n         \"rollback\",\n         \"confirm-traffic-increase\"\n        ],\n        \"type\": \"string\"\n       },\n       \"url\": {\n        \"description\": \"URL address of this webhook\",\n        \"format\": \"url\",\n        \"type\": \"string\"\n       }\n      },\n      \"required\": [\n       \"name\",\n       \"url\"\n      ],\n      \"type\": \"object\"\n     },\n     \"type\": \"array\"\n    }\n   },\n   \"type\": \"object\"\n  },\n  \"autoscalerRef\": {\n   \"description\": \"Scaler selector\",\n   \"properties\": {\n    \"apiVersion\": {\n     \"type\": \"string\"\n    },\n    \"kind\": {\n     \"enum\": [\n      \"HorizontalPodAutoscaler\",\n      \"ScaledObject\"\n     ],\n     \"type\": \"string\"\n    },\n    \"name\": {\n     \"type\": \"string\"\n    },\n    \"primaryScalerQueries\": {\n     \"additionalProperties\": {\n      \"type\": \"string\"\n     },\n     \"type\": \"object\"\n    }\n   },\n   \"required\": [\n    \"apiVersion\",\n    \"kind\",\n    \"name\"\n   ],\n   \"type\": \"object\"\n  },\n  \"ingressRef\": {\n   \"description\": \"Ingress selector\",\n   \"properties\": {\n    \"apiVersion\": {\n     \"type\": \"string\"\n    },\n    \"kind\": {\n     \"enum\": [\n      \"Ingress\"\n     ],\n     \"type\": \"string\"\n    },\n    \"name\": {\n     \"type\": \"string\"\n    }\n   },\n   \"required\": [\n    \"apiVersion\",\n    \"kind\",\n    \"name\"\n   ],\n   \"type\": \"object\"\n  },\n  \"metricsServer\": {\n   \"description\": \"Prometheus URL\",\n   \"type\": \"string\"\n  },\n  \"progressDeadlineSeconds\": {\n   \"description\": \"Deployment progress deadline\",\n   \"type\": \"number\"\n  },\n  \"provider\": {\n   \"description\": \"Traffic managent provider\",\n   \"type\": \"string\"\n  },\n  \"revertOnDeletion\": {\n   \"description\": \"Revert mutated resources to original spec on deletion\",\n   \"type\": \"boolean\"\n  },\n  \"service\": {\n   \"description\": \"Kubernetes Service spec\",\n   \"properties\": {\n    \"apex\": {\n     \"description\": \"Metadata to add to the apex service\",\n     \"properties\": {\n      \"annotations\": {\n       \"additionalProperties\": {\n        \"type\": \"string\"\n       },\n       \"type\": \"object\"\n      },\n      \"labels\": {\n       \"additionalProperties\": {\n        \"type\": \"string\"\n       },\n       \"type\": \"object\"\n      }\n     },\n     \"type\": \"object\"\n    },\n    \"appProtocol\": {\n     \"description\": \"Application protocol of the port\",\n     \"type\": \"string\"\n    },\n    \"backends\": {\n     \"description\": \"AppMesh backend array\",\n     \"items\": {\n      \"type\": \"string\"\n     },\n     \"type\": \"array\"\n    },\n    \"canary\": {\n     \"description\": \"Metadata to add to the canary service\",\n     \"properties\": {\n      \"annotations\": {\n       \"additionalProperties\": {\n        \"type\": \"string\"\n       },\n       \"type\": \"object\"\n      },\n      \"labels\": {\n       \"additionalProperties\": {\n        \"type\": \"string\"\n       },\n       \"type\": \"object\"\n      }\n     },\n     \"type\": \"object\"\n    },\n    \"corsPolicy\": {\n     \"description\": \"Istio Cross-Origin Resource Sharing policy (CORS)\",\n     \"properties\": {\n      \"allowCredentials\": {\n       \"type\": \"boolean\"\n      },\n      \"allowHeaders\": {\n       \"items\": {\n        \"format\": \"string\",\n        \"type\": \"string\"\n       },\n       \"type\": \"array\"\n      },\n      \"allowMethods\": {\n       \"description\": \"List of HTTP methods allowed to access the resource\",\n       \"items\": {\n        \"format\": \"string\",\n        \"type\": \"string\"\n       },\n       \"type\": \"array\"\n      },\n      \"allowOrigin\": {\n       \"description\": \"The list of origins that are allowed to perform CORS requests.\",\n       \"items\": {\n        \"format\": \"string\",\n        \"type\": \"string\"\n       },\n       \"type\": \"array\"\n      },\n      \"allowOrigins\": {\n       \"description\": \"String patterns that match allowed origins\",\n       \"items\": {\n        \"oneOf\": [\n         {\n          \"required\": [\n           \"exact\"\n          ]\n         },\n         {\n          \"required\": [\n           \"prefix\"\n          ]\n         },\n         {\n          \"required\": [\n           \"regex\"\n          ]\n         }\n        ],\n        \"properties\": {\n         \"exact\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"prefix\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"regex\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"type\": \"array\"\n      },\n      \"exposeHeaders\": {\n       \"items\": {\n        \"format\": \"string\",\n        \"type\": \"string\"\n       },\n       \"type\": \"array\"\n      },\n      \"maxAge\": {\n       \"type\": \"string\"\n      }\n     },\n     \"type\": \"object\"\n    },\n    \"delegation\": {\n     \"description\": \"enable behaving as a delegate VirtualService\",\n     \"type\": \"boolean\"\n    },\n    \"gatewayRefs\": {\n     \"description\": \"The list of parent Gateways for a HTTPRoute\",\n     \"items\": {\n      \"properties\": {\n       \"group\": {\n        \"default\": \"gateway.networking.k8s.io\",\n        \"maxLength\": 253,\n        \"pattern\": \"^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$\",\n        \"type\": \"string\"\n       },\n       \"kind\": {\n        \"default\": \"Gateway\",\n        \"maxLength\": 63,\n        \"minLength\": 1,\n        \"pattern\": \"^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$\",\n        \"type\": \"string\"\n       },\n       \"name\": {\n        \"maxLength\": 253,\n        \"minLength\": 1,\n        \"type\": \"string\"\n       },\n       \"namespace\": {\n        \"maxLength\": 63,\n        \"minLength\": 1,\n        \"pattern\": \"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$\",\n        \"type\": \"string\"\n       },\n       \"sectionName\": {\n        \"maxLength\": 253,\n        \"minLength\": 1,\n        \"pattern\": \"^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$\",\n        \"type\": \"string\"\n       }\n      },\n      \"required\": [\n       \"name\"\n      ],\n      \"type\": \"object\"\n     },\n     \"maxItems\": 32,\n     \"type\": \"array\"\n    },\n    \"gateways\": {\n     \"description\": \"The list of Istio gateway for this virtual service\",\n     \"items\": {\n      \"type\": \"string\"\n     },\n     \"type\": \"array\"\n    },\n    \"headers\": {\n     \"description\": \"Headers operations\",\n     \"properties\": {\n      \"request\": {\n       \"properties\": {\n        \"add\": {\n         \"additionalProperties\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"type\": \"object\"\n        },\n        \"remove\": {\n         \"items\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"type\": \"array\"\n        },\n        \"set\": {\n         \"additionalProperties\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"type\": \"object\"\n        }\n       },\n       \"type\": \"object\"\n      },\n      \"response\": {\n       \"properties\": {\n        \"add\": {\n         \"additionalProperties\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"type\": \"object\"\n        },\n        \"remove\": {\n         \"items\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"type\": \"array\"\n        },\n        \"set\": {\n         \"additionalProperties\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"type\": \"object\"\n        }\n       },\n       \"type\": \"object\"\n      }\n     },\n     \"type\": \"object\"\n    },\n    \"hosts\": {\n     \"description\": \"The list of host names for this service\",\n     \"items\": {\n      \"type\": \"string\"\n     },\n     \"type\": \"array\"\n    },\n    \"match\": {\n     \"description\": \"URI match conditions\",\n     \"items\": {\n      \"properties\": {\n       \"authority\": {\n        \"oneOf\": [\n         {\n          \"not\": {\n           \"anyOf\": [\n            {\n             \"required\": [\n              \"exact\"\n             ]\n            },\n            {\n             \"required\": [\n              \"prefix\"\n             ]\n            },\n            {\n             \"required\": [\n              \"regex\"\n             ]\n            }\n           ]\n          }\n         },\n         {\n          \"required\": [\n           \"exact\"\n          ]\n         },\n         {\n          \"required\": [\n           \"prefix\"\n          ]\n         },\n         {\n          \"required\": [\n           \"regex\"\n          ]\n         }\n        ],\n        \"properties\": {\n         \"exact\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"prefix\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"regex\": {\n          \"description\": \"RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).\",\n          \"format\": \"string\",\n          \"type\": \"string\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"gateways\": {\n        \"description\": \"Names of gateways where the rule should be applied.\",\n        \"items\": {\n         \"format\": \"string\",\n         \"type\": \"string\"\n        },\n        \"type\": \"array\"\n       },\n       \"headers\": {\n        \"additionalProperties\": {\n         \"oneOf\": [\n          {\n           \"not\": {\n            \"anyOf\": [\n             {\n              \"required\": [\n               \"exact\"\n              ]\n             },\n             {\n              \"required\": [\n               \"prefix\"\n              ]\n             },\n             {\n              \"required\": [\n               \"regex\"\n              ]\n             }\n            ]\n           }\n          },\n          {\n           \"required\": [\n            \"exact\"\n           ]\n          },\n          {\n           \"required\": [\n            \"prefix\"\n           ]\n          },\n          {\n           \"required\": [\n            \"regex\"\n           ]\n          }\n         ],\n         \"properties\": {\n          \"exact\": {\n           \"format\": \"string\",\n           \"type\": \"string\"\n          },\n          \"prefix\": {\n           \"format\": \"string\",\n           \"type\": \"string\"\n          },\n          \"regex\": {\n           \"description\": \"RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).\",\n           \"format\": \"string\",\n           \"type\": \"string\"\n          }\n         },\n         \"type\": \"object\"\n        },\n        \"type\": \"object\"\n       },\n       \"ignoreUriCase\": {\n        \"description\": \"Flag to specify whether the URI matching should be case-insensitive.\",\n        \"type\": \"boolean\"\n       },\n       \"method\": {\n        \"oneOf\": [\n         {\n          \"not\": {\n           \"anyOf\": [\n            {\n             \"required\": [\n              \"exact\"\n             ]\n            },\n            {\n             \"required\": [\n              \"prefix\"\n             ]\n            },\n            {\n             \"required\": [\n              \"regex\"\n             ]\n            }\n           ]\n          }\n         },\n         {\n          \"required\": [\n           \"exact\"\n          ]\n         },\n         {\n          \"required\": [\n           \"prefix\"\n          ]\n         },\n         {\n          \"required\": [\n           \"regex\"\n          ]\n         }\n        ],\n        \"properties\": {\n         \"exact\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"prefix\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"regex\": {\n          \"description\": \"RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).\",\n          \"format\": \"string\",\n          \"type\": \"string\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"name\": {\n        \"description\": \"The name assigned to a match.\",\n        \"format\": \"string\",\n        \"type\": \"string\"\n       },\n       \"port\": {\n        \"description\": \"Specifies the ports on the host that is being addressed.\",\n        \"type\": \"integer\"\n       },\n       \"queryParams\": {\n        \"additionalProperties\": {\n         \"oneOf\": [\n          {\n           \"not\": {\n            \"anyOf\": [\n             {\n              \"required\": [\n               \"exact\"\n              ]\n             },\n             {\n              \"required\": [\n               \"prefix\"\n              ]\n             },\n             {\n              \"required\": [\n               \"regex\"\n              ]\n             }\n            ]\n           }\n          },\n          {\n           \"required\": [\n            \"exact\"\n           ]\n          },\n          {\n           \"required\": [\n            \"prefix\"\n           ]\n          },\n          {\n           \"required\": [\n            \"regex\"\n           ]\n          }\n         ],\n         \"properties\": {\n          \"exact\": {\n           \"format\": \"string\",\n           \"type\": \"string\"\n          },\n          \"prefix\": {\n           \"format\": \"string\",\n           \"type\": \"string\"\n          },\n          \"regex\": {\n           \"description\": \"RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).\",\n           \"format\": \"string\",\n           \"type\": \"string\"\n          }\n         },\n         \"type\": \"object\"\n        },\n        \"description\": \"Query parameters for matching.\",\n        \"type\": \"object\"\n       },\n       \"scheme\": {\n        \"oneOf\": [\n         {\n          \"not\": {\n           \"anyOf\": [\n            {\n             \"required\": [\n              \"exact\"\n             ]\n            },\n            {\n             \"required\": [\n              \"prefix\"\n             ]\n            },\n            {\n             \"required\": [\n              \"regex\"\n             ]\n            }\n           ]\n          }\n         },\n         {\n          \"required\": [\n           \"exact\"\n          ]\n         },\n         {\n          \"required\": [\n           \"prefix\"\n          ]\n         },\n         {\n          \"required\": [\n           \"regex\"\n          ]\n         }\n        ],\n        \"properties\": {\n         \"exact\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"prefix\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"regex\": {\n          \"description\": \"RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).\",\n          \"format\": \"string\",\n          \"type\": \"string\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"sourceLabels\": {\n        \"additionalProperties\": {\n         \"format\": \"string\",\n         \"type\": \"string\"\n        },\n        \"type\": \"object\"\n       },\n       \"sourceNamespace\": {\n        \"description\": \"Source namespace constraining the applicability of a rule to workloads in that namespace.\",\n        \"format\": \"string\",\n        \"type\": \"string\"\n       },\n       \"uri\": {\n        \"oneOf\": [\n         {\n          \"not\": {\n           \"anyOf\": [\n            {\n             \"required\": [\n              \"exact\"\n             ]\n            },\n            {\n             \"required\": [\n              \"prefix\"\n             ]\n            },\n            {\n             \"required\": [\n              \"regex\"\n             ]\n            }\n           ]\n          }\n         },\n         {\n          \"required\": [\n           \"exact\"\n          ]\n         },\n         {\n          \"required\": [\n           \"prefix\"\n          ]\n         },\n         {\n          \"required\": [\n           \"regex\"\n          ]\n         }\n        ],\n        \"properties\": {\n         \"exact\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"prefix\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"regex\": {\n          \"description\": \"RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).\",\n          \"format\": \"string\",\n          \"type\": \"string\"\n         }\n        },\n        \"type\": \"object\"\n       },\n       \"withoutHeaders\": {\n        \"additionalProperties\": {\n         \"oneOf\": [\n          {\n           \"not\": {\n            \"anyOf\": [\n             {\n              \"required\": [\n               \"exact\"\n              ]\n             },\n             {\n              \"required\": [\n               \"prefix\"\n              ]\n             },\n             {\n              \"required\": [\n               \"regex\"\n              ]\n             }\n            ]\n           }\n          },\n          {\n           \"required\": [\n            \"exact\"\n           ]\n          },\n          {\n           \"required\": [\n            \"prefix\"\n           ]\n          },\n          {\n           \"required\": [\n            \"regex\"\n           ]\n          }\n         ],\n         \"properties\": {\n          \"exact\": {\n           \"format\": \"string\",\n           \"type\": \"string\"\n          },\n          \"prefix\": {\n           \"format\": \"string\",\n           \"type\": \"string\"\n          },\n          \"regex\": {\n           \"description\": \"RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).\",\n           \"format\": \"string\",\n           \"type\": \"string\"\n          }\n         },\n         \"type\": \"object\"\n        },\n        \"description\": \"withoutHeader has the same syntax with the header, but has opposite meaning.\",\n        \"type\": \"object\"\n       }\n      },\n      \"type\": \"object\"\n     },\n     \"type\": \"array\"\n    },\n    \"meshName\": {\n     \"description\": \"AppMesh mesh name\",\n     \"type\": \"string\"\n    },\n    \"name\": {\n     \"description\": \"Kubernetes service name\",\n     \"type\": \"string\"\n    },\n    \"port\": {\n     \"description\": \"Container port number\",\n     \"type\": \"number\"\n    },\n    \"portDiscovery\": {\n     \"description\": \"Enable port dicovery\",\n     \"type\": \"boolean\"\n    },\n    \"portName\": {\n     \"description\": \"Container port name\",\n     \"type\": \"string\"\n    },\n    \"primary\": {\n     \"description\": \"Metadata to add to the primary service\",\n     \"properties\": {\n      \"annotations\": {\n       \"additionalProperties\": {\n        \"type\": \"string\"\n       },\n       \"type\": \"object\"\n      },\n      \"labels\": {\n       \"additionalProperties\": {\n        \"type\": \"string\"\n       },\n       \"type\": \"object\"\n      }\n     },\n     \"type\": \"object\"\n    },\n    \"retries\": {\n     \"description\": \"Retry policy for HTTP requests\",\n     \"properties\": {\n      \"attempts\": {\n       \"description\": \"Number of retries for a given request\",\n       \"format\": \"int32\",\n       \"type\": \"integer\"\n      },\n      \"perTryTimeout\": {\n       \"description\": \"Timeout per retry attempt for a given request\",\n       \"type\": \"string\"\n      },\n      \"retryOn\": {\n       \"description\": \"Specifies the conditions under which retry takes place\",\n       \"format\": \"string\",\n       \"type\": \"string\"\n      }\n     },\n     \"type\": \"object\"\n    },\n    \"rewrite\": {\n     \"description\": \"Rewrite HTTP URIs\",\n     \"properties\": {\n      \"uri\": {\n       \"format\": \"string\",\n       \"type\": \"string\"\n      }\n     },\n     \"type\": \"object\"\n    },\n    \"targetPort\": {\n     \"description\": \"Container target port name\",\n     \"x-kubernetes-int-or-string\": true\n    },\n    \"timeout\": {\n     \"description\": \"HTTP or gRPC request timeout\",\n     \"type\": \"string\"\n    },\n    \"trafficPolicy\": {\n     \"description\": \"Istio traffic policy\",\n     \"properties\": {\n      \"connectionPool\": {\n       \"properties\": {\n        \"http\": {\n         \"description\": \"HTTP connection pool settings.\",\n         \"properties\": {\n          \"h2UpgradePolicy\": {\n           \"description\": \"Specify if http1.1 connection should be upgraded to http2 for the associated destination.\",\n           \"enum\": [\n            \"DEFAULT\",\n            \"DO_NOT_UPGRADE\",\n            \"UPGRADE\"\n           ],\n           \"type\": \"string\"\n          },\n          \"http1MaxPendingRequests\": {\n           \"description\": \"Maximum number of pending HTTP requests to a destination.\",\n           \"format\": \"int32\",\n           \"type\": \"integer\"\n          },\n          \"http2MaxRequests\": {\n           \"description\": \"Maximum number of requests to a backend.\",\n           \"format\": \"int32\",\n           \"type\": \"integer\"\n          },\n          \"idleTimeout\": {\n           \"description\": \"The idle timeout for upstream connection pool connections.\",\n           \"type\": \"string\"\n          },\n          \"maxRequestsPerConnection\": {\n           \"description\": \"Maximum number of requests per connection to a backend.\",\n           \"format\": \"int32\",\n           \"type\": \"integer\"\n          },\n          \"maxRetries\": {\n           \"format\": \"int32\",\n           \"type\": \"integer\"\n          }\n         },\n         \"type\": \"object\"\n        }\n       },\n       \"type\": \"object\"\n      },\n      \"loadBalancer\": {\n       \"description\": \"Settings controlling the load balancer algorithms.\",\n       \"oneOf\": [\n        {\n         \"required\": [\n          \"simple\"\n         ]\n        },\n        {\n         \"properties\": {\n          \"consistentHash\": {\n           \"oneOf\": [\n            {\n             \"required\": [\n              \"httpHeaderName\"\n             ]\n            },\n            {\n             \"required\": [\n              \"httpCookie\"\n             ]\n            },\n            {\n             \"required\": [\n              \"useSourceIp\"\n             ]\n            },\n            {\n             \"required\": [\n              \"httpQueryParameterName\"\n             ]\n            }\n           ]\n          }\n         },\n         \"required\": [\n          \"consistentHash\"\n         ]\n        }\n       ],\n       \"properties\": {\n        \"consistentHash\": {\n         \"properties\": {\n          \"httpCookie\": {\n           \"description\": \"Hash based on HTTP cookie.\",\n           \"properties\": {\n            \"name\": {\n             \"description\": \"Name of the cookie.\",\n             \"format\": \"string\",\n             \"type\": \"string\"\n            },\n            \"path\": {\n             \"description\": \"Path to set for the cookie.\",\n             \"format\": \"string\",\n             \"type\": \"string\"\n            },\n            \"ttl\": {\n             \"description\": \"Lifetime of the cookie.\",\n             \"type\": \"string\"\n            }\n           },\n           \"type\": \"object\"\n          },\n          \"httpHeaderName\": {\n           \"description\": \"Hash based on a specific HTTP header.\",\n           \"format\": \"string\",\n           \"type\": \"string\"\n          },\n          \"httpQueryParameterName\": {\n           \"description\": \"Hash based on a specific HTTP query parameter.\",\n           \"format\": \"string\",\n           \"type\": \"string\"\n          },\n          \"minimumRingSize\": {\n           \"type\": \"integer\"\n          },\n          \"useSourceIp\": {\n           \"description\": \"Hash based on the source IP address.\",\n           \"type\": \"boolean\"\n          }\n         },\n         \"type\": \"object\"\n        },\n        \"localityLbSetting\": {\n         \"properties\": {\n          \"distribute\": {\n           \"description\": \"Optional: only one of distribute or failover can be set.\",\n           \"items\": {\n            \"properties\": {\n             \"from\": {\n              \"description\": \"Originating locality, '/' separated, e.g.\",\n              \"format\": \"string\",\n              \"type\": \"string\"\n             },\n             \"to\": {\n              \"additionalProperties\": {\n               \"type\": \"integer\"\n              },\n              \"description\": \"Map of upstream localities to traffic distribution weights.\",\n              \"type\": \"object\"\n             }\n            },\n            \"type\": \"object\"\n           },\n           \"type\": \"array\"\n          },\n          \"enabled\": {\n           \"description\": \"enable locality load balancing, this is DestinationRule-level and will override mesh wide settings in entirety.\",\n           \"type\": \"boolean\"\n          },\n          \"failover\": {\n           \"description\": \"Optional: only failover or distribute can be set.\",\n           \"items\": {\n            \"properties\": {\n             \"from\": {\n              \"description\": \"Originating region.\",\n              \"format\": \"string\",\n              \"type\": \"string\"\n             },\n             \"to\": {\n              \"format\": \"string\",\n              \"type\": \"string\"\n             }\n            },\n            \"type\": \"object\"\n           },\n           \"type\": \"array\"\n          }\n         },\n         \"type\": \"object\"\n        },\n        \"simple\": {\n         \"enum\": [\n          \"ROUND_ROBIN\",\n          \"LEAST_CONN\",\n          \"RANDOM\",\n          \"PASSTHROUGH\"\n         ],\n         \"type\": \"string\"\n        }\n       },\n       \"type\": \"object\"\n      },\n      \"outlierDetection\": {\n       \"description\": \"Settings controlling eviction of unhealthy hosts from the load balancing pool.\",\n       \"properties\": {\n        \"baseEjectionTime\": {\n         \"description\": \"Minimum ejection duration.\",\n         \"type\": \"string\"\n        },\n        \"consecutive5xxErrors\": {\n         \"description\": \"Number of 5xx errors before a host is ejected from the connection pool.\",\n         \"type\": \"integer\"\n        },\n        \"consecutiveErrors\": {\n         \"format\": \"int32\",\n         \"type\": \"integer\"\n        },\n        \"consecutiveGatewayErrors\": {\n         \"description\": \"Number of gateway errors before a host is ejected from the connection pool.\",\n         \"format\": \"int32\",\n         \"type\": \"integer\"\n        },\n        \"interval\": {\n         \"description\": \"Time interval between ejection sweep analysis.\",\n         \"type\": \"string\"\n        },\n        \"maxEjectionPercent\": {\n         \"format\": \"int32\",\n         \"type\": \"integer\"\n        },\n        \"minHealthPercent\": {\n         \"format\": \"int32\",\n         \"type\": \"integer\"\n        }\n       },\n       \"type\": \"object\"\n      },\n      \"tls\": {\n       \"description\": \"Istio TLS related settings for connections to the upstream service\",\n       \"properties\": {\n        \"caCertificates\": {\n         \"format\": \"string\",\n         \"type\": \"string\"\n        },\n        \"clientCertificate\": {\n         \"description\": \"REQUIRED if mode is `MUTUAL`.\",\n         \"format\": \"string\",\n         \"type\": \"string\"\n        },\n        \"mode\": {\n         \"enum\": [\n          \"DISABLE\",\n          \"SIMPLE\",\n          \"MUTUAL\",\n          \"ISTIO_MUTUAL\"\n         ],\n         \"type\": \"string\"\n        },\n        \"privateKey\": {\n         \"description\": \"REQUIRED if mode is `MUTUAL`.\",\n         \"format\": \"string\",\n         \"type\": \"string\"\n        },\n        \"sni\": {\n         \"description\": \"SNI string to present to the server during TLS handshake.\",\n         \"format\": \"string\",\n         \"type\": \"string\"\n        },\n        \"subjectAltNames\": {\n         \"items\": {\n          \"format\": \"string\",\n          \"type\": \"string\"\n         },\n         \"type\": \"array\"\n        }\n       },\n       \"type\": \"object\"\n      }\n     },\n     \"type\": \"object\"\n    }\n   },\n   \"required\": [\n    \"port\"\n   ],\n   \"type\": \"object\"\n  },\n  \"skipAnalysis\": {\n   \"description\": \"Skip analysis and promote canary\",\n   \"type\": \"boolean\"\n  },\n  \"targetRef\": {\n   \"description\": \"Target selector\",\n   \"properties\": {\n    \"apiVersion\": {\n     \"type\": \"string\"\n    },\n    \"kind\": {\n     \"enum\": [\n      \"DaemonSet\",\n      \"Deployment\",\n      \"Service\"\n     ],\n     \"type\": \"string\"\n    },\n    \"name\": {\n     \"type\": \"string\"\n    }\n   },\n   \"required\": [\n    \"apiVersion\",\n    \"kind\",\n    \"name\"\n   ],\n   \"type\": \"object\"\n  },\n  \"upstreamRef\": {\n   \"description\": \"Gloo Upstream selector\",\n   \"properties\": {\n    \"apiVersion\": {\n     \"type\": \"string\"\n    },\n    \"kind\": {\n     \"enum\": [\n      \"Upstream\"\n     ],\n     \"type\": \"string\"\n    },\n    \"name\": {\n     \"type\": \"string\"\n    },\n    \"namespace\": {\n     \"type\": \"string\"\n    }\n   },\n   \"required\": [\n    \"apiVersion\",\n    \"kind\",\n    \"name\"\n   ],\n   \"type\": \"object\"\n  }\n },\n \"required\": [\n  \"targetRef\",\n  \"service\",\n  \"analysis\"\n ],\n \"title\": \"Canary\",\n \"type\": \"object\"\n}"}